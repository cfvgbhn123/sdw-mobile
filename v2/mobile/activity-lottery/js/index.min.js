!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){function n(t){this.id=t.id||"undefined",this.scroll_width=.86*document.documentElement.clientWidth>>0,this.current_scroll_width=0,this.current_index=0,this.textArry=t.texts||[],this.isLoop=t.isLoop||!0,this.text_dom_width=0,this.delTime=t.delTime||1e3}n.prototype.init=function(){if("undefined"!=this.id&&0!=this.textArry.length){var t=document.querySelector("#"+this.id);this.scroll_width=t.offsetWidth,t.innerHTML="<div class='scroll-texts-cont'><div class='text'></div></div>",this.text_dom=document.querySelector("#"+this.id+" .text"),this.start()}},n.prototype.start=function(){if(this.current_index==this.textArry.length){if(!this.isLoop)return;this.current_index=0}this.text_dom.innerHTML=this.textArry[this.current_index]+"";var t="translate3d("+this.scroll_width+"px,0,0)";this.text_dom.style.transform=t,this.text_dom.style.webkitTransform=t,this.text_dom.style.display="block",this.text_dom_width=this.text_dom.offsetWidth,this.current_scroll_width=this.scroll_width,requestAnimationFrame(this.timerFn.bind(this)),this.current_index++},n.prototype.timerFn=function(){if(this.current_scroll_width>-(this.text_dom_width+20)){this.current_scroll_width--;var t="translate3d("+this.current_scroll_width+"px,0,0)";this.text_dom.style.transform=t,this.text_dom.style.webkitTransform=t,requestAnimationFrame(this.timerFn.bind(this))}else this.text_dom.style.display="none",setTimeout(this.start.bind(this),this.delTime)},t.exports=n},function(t,e){},function(t,e){},function(t,e,n){n(1),n(2);var i=n(0),o={showNotWindow:"",pageType:"0",showTixian:!1,showNotNum:!1,startLottery:!1,showTip:!1,userInfo:{all:0,uid:0,maxAll:0,money:0,num:0,type:0},achive:{gamename:""},callback:null,showLotteryResult:!1,showLotteryResultMoney:0,lottery:{init:!1,show:0,timer:null,stateIndex:0,items:null,startTime:+new Date,lottery:[100,.1,3,20,2.5,.5,10,1],aniObj:{time:0,stop:0,aniTime:100,canplay:1}},gameBox:[{intro:"完成游戏小任务，增加抽奖次数",gameList:[{img:"images/XZSC.png",task:"达到60级",name:"血战沙城",playUrl:SDW_PATH.MOBILE_ROOT+"game/1482314563.html"},{img:"images/FKLM.png",task:"通过30关",name:"方块联盟",playUrl:SDW_PATH.MOBILE_ROOT+"game/1179339853.html"}]}]},r={showTiXianContainer:function(){this.showLotteryResult=!1,this.initLotteryFn(),SDW_WEB.onShandw?SDW_WEB.openNewWindow({title:"红包提现",link:"http://www.shandw.com/redPacket/?v="+SDW_WEB.version,isFullScreen:!1,showMoreBtn:!0}):this.showTixian=!0},openNewPage:function(t){var e=this,n=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel},!1,t);if(SDW_WEB.onShandw)return SDW_WEB.sdw.openWindow({link:n,title:"游戏加载中",showMoreBtn:!0,fail:function(){e.$messagebox.alert("哦哦，崩溃啦！正在查明原因~~~","加载失败")}}),null;window.location.href=n},forbiddenScroll:function(t){var e=function(t){t.stopPropagation(),t.preventDefault()};t?document.addEventListener("touchmove",e,!1):document.removeEventListener("touchmove",e,!1)},_init:function(){document.body.style.display="block",SDW_WEB.onShandw||SDW_WEB.onWeiXin||(this.showNotWindow="1",this.forbiddenScroll(!0)),this.startLightAnimation(),this.initLotteryFn(),this.getInitInfo(),this.$nextTick(function(){})},startLightAnimation:function(){var t=document.querySelector("#light-animation"),e=function(){"1"===t.dataset.light?(t.dataset.light="2",t.className="light-animation light2"):(t.dataset.light="1",t.className="light-animation light1"),setTimeout(function(){requestAnimationFrame(e)},600)};setTimeout(function(){requestAnimationFrame(e)},600)},createScrollText:function(t){t.user=t.user||[],t.order=t.order||[];for(var e={},n=0;n<t.user.length;n++)e[t.user[n].id]=t.user[n].nick||""+t.user[n].id;for(var o=[],n=0;n<t.order.length;n++){var r=t.order[n];o.push(e[r.uid]+"成功提取了"+(r.money/100).toFixed(2)+"元现金")}new i({id:"cbd",texts:o}).init()},getInitInfo:function(){var t=this,e=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme},!1,HTTP_STATIC+"hbwhh");SDW_WEB.getAjaxData(e,function(e){if(1==e.result){t.createScrollText(e),t.userInfo.num=e.info.num,t.userInfo.money=e.info.money/100,t.userInfo.num>0&&(t.showTip=!0);SDW_WEB.mySetTimer&&(clearTimeout(SDW_WEB.mySetTimer),SDW_WEB.mySetTimer=null),SDW_WEB.sdw.onSetShareOperate({title:"疯狂摇奖瓜分500万，手慢即将错过",desc:"海量福利大派送，现在参加，享受双倍福利。",link:function(){return SDW_WEB.MOBILE_ROOT+"activity-lottery/?channel="+SDW_WEB.channel+"&_sender_sdw_rfid_="+SDW_WEB.USER_INFO.uid}(),imgUrl:"https://www.shandw.com/m/activity-lottery/images/activitylotteryicon.png",success:t.successShareFn}),setTimeout(function(){for(var t=document.getElementsByTagName("meta"),e=0;e<t.length;e++){var n=t[e];"description"==n.name&&(n.content="红包随时提现，现在开抢，享受双倍福利~")}},300)}else dialog.show("error",e.msg,1)})},successShareFn:function(){dialog.show("ok","分享成功",1);var t="_HB_ACTIVITY_LOTTERY_"+SDW_WEB.USER_INFO.uid+SDW_WEB.version;if(!SDW_WEB.Store.get(t,!0)){SDW_WEB.Store.set(t,"finished",1);var e=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme},!1,HTTP_STATIC+"hbwhhshare");SDW_WEB.getAjaxData(e,function(t){1==t.result&&(dialog.show("ok","分享成功，额外获得一次摇奖机会",1),o.userInfo.num++)})}},getMoneyBtn:function(){SDW_WEB.onShandw?SDW_WEB.openNewWindow({title:"红包提现",link:"http://www.shandw.com/redPacket/?v="+SDW_WEB.version,isFullScreen:!1,showMoreBtn:!0}):this.showTixian=!0},goToRule:function(){document.body.scrollTop=document.documentElement.scrollTop=1e4},findIdx:function(t){for(var e=0;e<o.lottery.lottery.length;e++)if(100*o.lottery.lottery[e]==t)return e;return 0},getLotteryFn:function(){var t=this;if(!o.startLottery&&""==o.showNotWindow)if(o.userInfo.num<=0)dialog.show("error","您的摇奖次数不足",1);else{o.startLottery=!0,t.lottery.startTime=+new Date,t.lottery.items[t.lottery.stateIndex].classList.add("cell-box-container-select"),t.lottery.timer=requestAnimationFrame(t.lotteryLight);var e=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme},!1,HTTP_STATIC+"hbwhhlotto");SDW_WEB.getAjaxData(e,function(e){1==e.result?(o.lottery.aniObj.stop=t.findIdx(e.money),o.callback=function(){o.showLotteryResult=!0,o.showLotteryResultMoney=e.money/100,o.userInfo.money+=e.money/100,o.userInfo.num--}):dialog.show("error",e.msg,1)})}},initLotteryFn:function(){var t=o.lottery;o.startLottery=!1,t.stateIndex=0;var e=Math.max(0,40),n=/^\+?[1-9][0-9]*$/.test(e/8+"")?e/8:e/8+1;t.aniObj.time=8*n,t.aniObj.stop=1,t.aniObj.aniTime=100,t.aniObj.canplay=1,!t.items&&(t.items=document.querySelectorAll(".cell-box-container"));var i=document.querySelector(".cell-box-container-select");i&&i.classList.remove("cell-box-container-select"),o.callback=null},lotteryLight:function(){var t=o.lottery,e=+new Date;e-t.startTime>=t.aniObj.aniTime&&(t.startTime=e,t.aniObj.stop>t.stateIndex-40&&(t.items[t.stateIndex%8].classList.remove("cell-box-container-select"),t.stateIndex++,t.items[t.stateIndex%8].classList.add("cell-box-container-select")),t.aniObj.time<=t.stateIndex&&(t.aniObj.aniTime=150+Math.min(150,2.01*(t.stateIndex-t.aniObj.time+1)*40),t.aniObj.stop==t.stateIndex-40&&(t.aniObj.canplay=0,setTimeout(function(){o.callback?o.callback():(o.startLottery=!1,dialog.show("error","系统繁忙，请稍后再试",1))},2*t.aniObj.aniTime)))),t.aniObj.canplay&&(t.timer=requestAnimationFrame(this.lotteryLight))},closeMaskContainer:function(){this.showTixian=!1,this.showLotteryResult=!1,this.showNotNum=!1,this.showTip=!1,this.initLotteryFn()},downloadApp:function(){location.href="http://www.shandw.com/app/download/"},switchUser:function(){SDW_WEB.onShandw&&SDW_WEB.sdw.logout()}},s=new Vue({el:"#app",data:o,methods:r});SDW_WEB.onShandw?(SDW_WEB.sdw.onSetToolBarOperation(["AppMessage","Timeline","QQ","QZone","Weibo","copyLink"]),SDW_WEB.getSdwUserData().then(function(t){8!=t.fl&&(o.showNotWindow="2",r.forbiddenScroll(!0)),s.$nextTick(function(){s._init()})},function(){alert("获取用户信息失败")})):s.$nextTick(function(){s._init()})}]);