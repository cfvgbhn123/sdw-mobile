!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){},function(e,t){},,,,,,function(e,t,n){n(1),n(0);new Vue({el:"#app",data:{hasTelInfo:null,tel:null,code:{val:null,time:60},errorTip:null,id:SDW_WEB.USER_INFO.uid},methods:{getTelInfo:function(){var e=this,t=SDW_WEB.URLS.addParam({uid:SDW_WEB.USER_INFO.uid},!1,HTTP_STATIC+"queryBindingPhone");SDW_WEB.getAjaxData(t,function(t){1===t.result?e.hasTelInfo=!1:2===t.result?(e.hasTelInfo=!0,e.tel=t.data.phone.replace(/^(.{3})(?:\d+)(.{4})$/,"$1****$2"),e.id=t.data.uid):dialog.show("error",t.msg,1)})},bindTel:function(){if(!this.checkPhone())return null;var e=this,t={time:this.backTime,channel:SDW_WEB.channel,uid:SDW_WEB.USER_INFO.uid,fl:SDW_WEB.USER_INFO.fl,sec:(new Date).getTime(),phone:this.tel,otoken:SDW_WEB.USER_INFO.otoken};t.token=SDW_WEB.MD5(""+t.channel+t.uid+t.sec+t.time+this.code.val);var n=SDW_WEB.URLS.addParam(t,!1,HTTP_USER_STATIC+"checkcode");if(!/^\d{6}$/.test(this.code.val)&&!/^\d{4}$/.test(this.code.val))return void(this.errorTip="验证码错误");this.errorTip=null,SDW_WEB.getAjaxData(n,function(t){1===t.result?(e.hasTelInfo=!0,e.tel=e.tel.replace(/^(.{3})(?:\d+)(.{4})$/,"$1****$2"),dialog.show("ok","绑定成功",1)):dialog.show("error",t.msg,1)})},getCode:function(){var e=this;if(!this.checkPhone())return null;this.errorTip=null;var t={time:(new Date).getTime(),channel:SDW_WEB.channel,uid:SDW_WEB.USER_INFO.uid,fl:SDW_WEB.USER_INFO.fl,sec:SDW_WEB.USER_INFO.secheme,phone:this.tel,otoken:SDW_WEB.USER_INFO.otoken};t.token=SDW_WEB.MD5(""+t.channel+t.uid+t.sec+t.phone+t.time+t.otoken);var n=SDW_WEB.URLS.addParam(t,!1,HTTP_USER_STATIC+"getcode");SDW_WEB.getAjaxData(n,function(t){if(1===t.result){if(dialog.show("ok","验证码已发送",1),e.code.time<60)return;e.interver(),e.backTime=t.time}else dialog.show("error",t.msg,1)})},interver:function(){var e=this,t=setInterval(function(){--e.code.time<1&&(clearInterval(t),e.code.time=60)},1e3)},checkPhone:function(){return!!/^1[345678]\d{9}$/.test(this.tel)||(this.errorTip="手机号格式有误",!1)}},mounted:function(){var e=this;SDW_WEB.onShandw?SDW_WEB.getSdwUserData().then(function(t){e.getTelInfo()},function(e){SDW_WEB.onShandw&&SDW_WEB.sdw.openLogin({success:function(){}})}):this.getTelInfo()},components:{}})}]);