!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){},function(t,e){},function(t,e,n){n(5);var i=n(6)(n(3),n(7),null,null);t.exports=i.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"user-info",data:function(){return{}},props:["user"],methods:{transMoney:function(t){return(t/100).toFixed(2)},goMyHome:function(){var t="http://www.shandw.com/mi/home/?channel="+SDW_WEB.channel;SDW_WEB.openNewWindow({link:t,isFullScreen:!1,showMoreBtn:!0,title:""})}},computed:{},watch:{}}},function(t,e,n){n(1);n(0);var i=n(2),o=n(27);!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+o)},o);return t=i+o,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var s={totalTaskFlag:0,bindPhoneItem:{},scrollView:null,loading:!1,showAlert:!1,showAlertDay:!1,userInfos:{},showIndex:0,contentNav:[{title:"每日任务",index:0,show:!1,page:0,method:"dailytasklt"},{title:"成就任务",index:1,show:!1,page:0,method:"achitasklt"}],dayList:[],tList:[],alertDayInfo:{},cTaskListMap:{},alertItemInfo:{current:{},list:[]},showBindPhoneFlag:0},a={showPhoneBindFn:function(){this.$refs.bindPhone.showbind=1,this.showBindPhoneFlag=1},bindPhoneCallback:function(){this.$refs.bindPhone.showbind=0,this.showBindPhoneFlag=0,this.bindPhoneItem.flag=1,this.checkDayTaskItem(this.bindPhoneItem)},myInit:function(){var t=this;setTimeout(function(){t.switchNavList({index:0})},0)},forbidden:function(t){t.preventDefault()},switchNavList:function(t){for(var e=0;e<this.contentNav.length;e++){var n=this.contentNav[e];t.index==n.index?(n.show=!0,this.showIndex=t.index,0===n.page&&this.getTaskListInfo(n)):n.show=!1}},getFinishTask:function(t){if(!this.loading){this.loading=!0;var e=this,n=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme,tid:t._id},!1,HTTP_STATIC+"taskaw");dialog.show("loading","领取中..."),SDW_WEB.getAjaxData(n,function(t){e.loading=!1,1===t.result?(dialog.show("ok","领取成功",1),e.updateList()):dialog.show("error",t.msg,1)})}},updateList:function(){0===this.showIndex?this.dayList=[]:1===this.showIndex&&(this.tList=[],this.cTaskListMap={}),this.contentNav[this.showIndex].page=0,this.getTaskListInfo(this.contentNav[this.showIndex],!0)},getTaskListInfo:function(t,e){if(!this.loading){this.loading=!0;var n=this,i=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme,page:t.page++},!1,HTTP_STATIC+t.method);e||dialog.show("loading","数据加载中..."),SDW_WEB.getAjaxData(i,function(i){n.loading=!1,n.userInfos=i.userInfo,1===i.result?("dailytasklt"===t.method&&n.createList(i.list,n.dayList,"dailytasklt"),"achitasklt"===t.method&&n.createList(i.list,n.tList),n.loading=!1):dialog.show("error",i.msg,1),e||dialog.hidden()})}},isToday:function(t,e){var n=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),s=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return n===s&&i===a&&o===r},convertType:function(t){3===t.pType?t.typeUrl="stamp":1===t.pType?t.typeUrl="gold":4!==t.pType&&7!==t.pType||(t.typeUrl="money",t.coin=(t.coin/100).toFixed(2))},createList:function(t,e,n){var i=[],o=[],s=[],a=[];if("dailytasklt"===n){var r="day_game_list"+SDW_WEB.USER_INFO.uid,d=SDW_WEB.Store.get(r,!0);if(d){var l=new Date,c=new Date(d.time);this.isToday(l,c)&&(a=d.list)}}for(var h=0;h<t.length;h++){var u=t[h];if(12===u.classic){2!==u.flag&&(u.flag=0);for(var f=0;f<a.length;f++)a[f]==u.appid&&2!==u.flag&&(u.flag=1)}this.convertType(u),1059!==u._id?0===u.flag?(u.btnMsg=1===u._id?"去绑定":"去完成",o.push(u)):1===u.flag?(u.btnMsg="领取",s.push(u)):2===u.flag&&(u.btnMsg=1===u._id?"已绑定":"已完成",i.push(u)):this.totalTaskFlag=u.flag}s.push.apply(s,o),s.push.apply(s,i),e.push.apply(e,s)},checkDayTaskItem:function(t,e){if("all"===e)return 2===this.totalTaskFlag?dialog.show("error","您已经完成任务",1):void(this.userInfos.atAll>=this.userInfos.atSize?this.getFinishTask({_id:1059}):dialog.show("error","请先完成任务",1));if(2!==t.flag){if(1===t.flag)return void this.getFinishTask(t);if(0===t.flag){if(1===t._id)return this.bindPhoneItem=t,void this.showPhoneBindFn();if(!/^http/.test(t.link))return dialog.show("error",t.link||"请先完成任务",1);var n=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel},!1,t.link),i={link:n,isFullScreen:!1,showMoreBtn:!0,title:""};i=SDW_WEB._checkWebViewObject(i),SDW_WEB.openNewWindow(i)}}},showAlertInfo:function(t){if(this.cTaskListMap[""+t.series])return void this.getAlertItemList(this.cTaskListMap[""+t.series]);if(!this.loading){this.loading=!0;var e=this,n=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,uid:SDW_WEB.USER_INFO.uid,sec:SDW_WEB.USER_INFO.secheme,series:t.series},!1,HTTP_STATIC+"achitasklt");dialog.show("loading","数据加载中..."),SDW_WEB.getAjaxData(n,function(n){if(1===n.result){n.list=n.list||[];for(var i=0;i<n.list.length;i++){var o=n.list[i];e.convertType(o)}e.cTaskListMap[""+t.series]=n.list,e.getAlertItemList(e.cTaskListMap[""+t.series]),e.showAlert=!0,dialog.hidden()}else dialog.show("error",n.msg,1);e.loading=!1})}},getAlertItemList:function(t){for(var e=t.slice(0),n=0;n<e.length;n++){var i=e[n];if(2!==i.flag){this.alertItemInfo.current=i;break}}n===e.length&&(this.alertItemInfo.current=e[n-1]),this.alertItemInfo.list=e.reverse(),this.showAlert=!0},showAlertDayInfo:function(t){this.alertDayInfo=t,this.showAlertDay=!0},hiddenAlert:function(){this.showAlert=!1,this.showAlertDay=!1}},r=new Vue({el:"#task-root",data:s,methods:a,components:{userInfo:i,bindPhone:o},watch:{showAlert:function(t){t&&setTimeout(function(){new IScroll("#scroll-view",{probeType:3,scrollbars:!1,mouseWheel:!1,hScrollbar:!1,interactiveScrollbars:!1,fadeScrollbars:!1})},200)}},mounted:function(){document.addEventListener("touchmove",function(t){s.showAlert&&t.cancelable&&(t.defaultPrevented||t.preventDefault())},{passive:!1})},computed:{totalType:function(){return 2===this.totalTaskFlag?"gray":this.userInfos.atAll?this.userInfos.atAll>=this.userInfos.atSize?"finish":void 0:""}}});SDW_WEB.getSdwUserData().then(function(t){r.myInit()},function(t){SDW_WEB.onShandw&&SDW_WEB.sdw.openLogin({success:function(){}})})},function(t,e){},function(t,e){t.exports=function(t,e,n,i){var o,s=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(o=t,s=t.default);var r="function"==typeof s?s.options:s;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),n&&(r._scopeId=n),i){var d=Object.create(r.computed||null);Object.keys(i).forEach(function(t){var e=i[t];d[t]=function(){return e}}),r.computed=d}return{esModule:o,exports:s,options:r}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-info-container"},[n("div",{staticClass:"avatar-container",on:{click:function(e){t.goMyHome()}}},[t.user.avatar?n("img",{staticClass:"avatar",attrs:{src:t.user.avatar}}):t._e()]),t._v(" "),n("div",{staticClass:"jinbi-container list-container",attrs:{id:"user-gold","data-value":t.user.gold}},[t._v("\n        "+t._s(t.user.gold||"0")+"\n    ")]),t._v(" "),n("div",{staticClass:"dianjuan-container list-container",attrs:{id:"user-stamp","data-value":t.user.stamp}},[t._v("\n        "+t._s(t.user.stamp||"0")+"\n    ")]),t._v(" "),n("div",{staticClass:"hongbao-container list-container",attrs:{id:"user-money","data-value":t.user.redPkt}},[t._v("￥ "+t._s(t.transMoney(t.user.redPkt||0))+"\n    ")])])},staticRenderFns:[]}},,,,,,,,,,,,,,,,,,,,function(t,e,n){n(29);var i=n(6)(n(28),n(30),null,null);t.exports=i.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),window.scrollForbFn=function(t){t.preventDefault()},e.default={name:"bind-phone",data:function(){return{bindMyPhone:"",bindMyCode:"",bindTimer:null,bindMsg:"获取验证码",bindStartTimer:0}},props:["showbind","bindPhoneItem"],methods:{bindPhoneCheck:function(){if(!/\d{11}/.test(this.bindMyPhone))return void window.dialog.show("error","请输入正确的手机号",1);if(!/\d+/.test(this.bindMyCode))return void window.dialog.show("error","请输入正确的验证码",1);dialog.show("loading","手机绑定中...");var t=this,e=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,uid:SDW_WEB.USER_INFO.uid,token:SDW_WEB.MD5(""+SDW_WEB.channel+SDW_WEB.USER_INFO.uid+SDW_WEB.USER_INFO.secheme+t.bindTime+t.bindMyCode),sec:SDW_WEB.USER_INFO.secheme,time:t.bindTime},!1,HTTP_USER_STATIC+"checkcode");SDW_WEB.getAjaxData(e,function(e){if(1==e.result){var n=t.bindMyPhone.substring(0,3)+"****"+t.bindMyPhone.substring(7);e.myPhoneStr=n,dialog.show("ok","手机绑定成功",1),t.$emit("bind-callback",e)}else dialog.show("error",e.msg,1)})},getBindCode:function(){var t=this;if(!(this.bindStartTimer>0)){if(!/\d{11}/.test(this.bindMyPhone))return void window.dialog.show("error","请输入正确的手机号",1);var e=+new Date,n=+new Date,i=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,uid:SDW_WEB.USER_INFO.uid,token:SDW_WEB.MD5(""+SDW_WEB.channel+SDW_WEB.USER_INFO.uid+e+this.bindMyPhone+n+SDW_WEB.USER_INFO.otoken),phone:this.bindMyPhone,sec:e,time:n},!1,HTTP_USER_STATIC+"getcode");dialog.show("loading","验证码获取中..."),SDW_WEB.getAjaxData(i,function(e){1===e.result?(dialog.show("ok","验证码已发送",1),t.bindTime=e.time,t.bindStartTimer=60,t.bindTimer=setInterval(function(){t.bindStartTimer<=1?(clearInterval(t.bindTimer),t.bindStartTimer=0,t.bindMsg="获取验证码",t.bindTimer=null):t.bindMsg=t.bindStartTimer--+"秒后获取"},1e3)):dialog.show("error",e.msg,1)})}},transCoins:function(t){var e,n;return t<1e4?t:t<1e8?(e=t/1e4>>0,n=t%1e4+"",0==n?e+"万":e+"."+n[0]+"万"):t<1e10?(e=t/1e8>>0,n=t%1e8+"",0==n?e+"亿":e+"."+n[0]+"亿"):void 0}},computed:{show:function(){return this.showbind||0}},watch:{showbind:function(t,e){1==t?document.addEventListener("touchmove",scrollForbFn,!1):document.removeEventListener("touchmove",scrollForbFn,!1)}}}},function(t,e){},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"bind-phone-info-container"},[t.show?n("div",{staticClass:"mask",on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.showbind=0}}}):t._e(),t._v(" "),n("transition",{attrs:{name:"fade2"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"bind-phone-infos"},[n("div",{staticClass:"bind-phone-name"},[t._v(t._s(t.bindPhoneItem.title))]),t._v(" "),n("div",{staticClass:"bind-phone-gift"},[t._v("奖励"),n("span",{staticClass:"conts-i"},[t._v(t._s(t.transCoins(t.bindPhoneItem.coin)))])]),t._v(" "),n("div",{staticClass:"desc"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.bindMyPhone,expression:"bindMyPhone"}],attrs:{type:"tel",placeholder:"请输入手机号码"},domProps:{value:t.bindMyPhone},on:{input:function(e){e.target.composing||(t.bindMyPhone=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.bindMyCode,expression:"bindMyCode"}],attrs:{type:"tel",placeholder:"请输入验证码","data-module":"80%"},domProps:{value:t.bindMyCode},on:{input:function(e){e.target.composing||(t.bindMyCode=e.target.value)}}}),t._v(" "),n("div",{staticClass:"get-code",class:t.bindTimer?"":"normal-code",attrs:{id:"bindCode"},on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.getBindCode()}}},[t._v("\n                    "+t._s(t.bindMsg)+"\n                ")])]),t._v(" "),n("section",{staticClass:"login-btn-v3",on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.bindPhoneCheck()}}},[t._v("绑"),n("span",{staticStyle:{width:"20px"}}),t._v("定\n            ")])])])],1)},staticRenderFns:[]}}]);