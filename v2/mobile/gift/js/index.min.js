!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e){t.exports=function(t,e,o,n){var i,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,a=t.default);var r="function"==typeof a?a.options:a;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),o&&(r._scopeId=o),n){var c=Object.create(r.computed||null);Object.keys(n).forEach(function(t){var e=n[t];c[t]=function(){return e}}),r.computed=c}return{esModule:i,exports:a,options:r}}},function(t,e){function o(t,e,o,n){if("function"!=typeof t)return void console.log("WindowScroll error: callback must be a Function!");this.toBottom=e||!1,this.enable=!0,this.callback=t||null,this.delayTime=o||200,this.offset=n||200,this.clientHeigth=document.documentElement.clientHeight||document.body.clientHeight,this._init()}o.prototype._init=function(){var t=this;t.timer=null,t.callback&&window.addEventListener("scroll",function(e){if(t.enable){var o=document.body.scrollTop+t.clientHeigth,n=document.documentElement.scrollHeight-t.offset,i=o>=n;(1==t.toBottom&&i||0==t.toBottom)&&!t.timer&&(t.timer=setTimeout(function(){t.callback(e),t.timer=null},t.delayTime))}},!1)},o.prototype.setCallback=function(t){"function"==typeof t?self.callback=t:console.log("[WindowScroll error]: callback must be a Function!")},o.prototype.runCallback=function(){this.callback&&this.callback()},t.exports=o},function(t,e){},function(t,e){},function(t,e,o){o(10);var n=o(0)(o(6),o(12),null,null);t.exports=n.exports},function(t,e,o){o(9);var n=o(0)(o(7),o(11),null,null);t.exports=n.exports},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"gift-item",data:function(){return{}},props:["giftItem"],methods:{},computed:{}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"fast-login",data:function(){return{loginFlagV2:1,phoneLoginData:{getCodeFlag:!1,phoneNum:"",phoneCode:"",RES_TIME:"",timerHand:null,message:"获取验证码"},tapTimer:null}},props:["show"],methods:{hidePage:function(){/home/.test(location.href)||(this.show=0)},forbidScroll:function(t){t.preventDefault()},timers:function(){var t=this,e=60,o=document.querySelector("#getCode-v-2");o.className="codetimer",t.codeMessage=e--+"秒后获取",t.timerHand=setInterval(function(){e<=0?(clearInterval(t.timerHand),o.className="codenormal",t.phoneLoginData.message="获取验证码",t.phoneLoginData.getCodeFlag=!1):t.phoneLoginData.message=e--+"秒后获取"},1e3)},chooseLoginType:function(){},getPhoneCode:function(){var t=this,e=this.phoneLoginData,o=SDW_WEB.channel;if(!e.getCodeFlag)if(/^1\d{10}$/.test(e.phoneNum)){e.getCodeFlag=!0;var n=+new Date/1e3>>0,i=(new Date).Format("yyyyMMdd"),a=SDW_WEB.MD5("SDW"+i+o+SDW_WEB.guid+e.phoneNum+n),s=HTTP_USER_STATIC+"telcode?channel="+o+"&phone="+e.phoneNum+"&time="+n+"&sign="+a;dialog.show("loading","验证码获取中..."),SDW_WEB.getAjaxData(s,function(o){1==o.result?(e.RES_TIME=o.time,e.getCodeFlag=!0,t.timers(),dialog.show("ok","验证码已发送",1),document.querySelector(".short").focus()):(e.getCodeFlag=!1,dialog.show("error",o.msg,1))},!1)}else dialog.show("error","请输入正确的手机号",1)},phoneLogin:function(t){var e=this,o=this.phoneLoginData,n=SDW_WEB.channel;if(/^1\d{10}$/.test(o.phoneNum))if(/^\d+$/.test(o.phoneCode)){var i=t?"&vst=1&vsttoken="+visitorMode.visitorToken:"",a=HTTP_USER_STATIC+"telcheck?channel="+n+"&phone="+o.phoneNum+"&time="+o.RES_TIME+"&sign="+SDW_WEB.MD5(n+SDW_WEB.guid+o.phoneNum+o.RES_TIME+o.phoneCode)+i;dialog.show("loading","登录中..."),SDW_WEB.getAjaxData(a,function(t){if(1==t.result){var o={uid:t.id,otoken:t.token,nick:t.nick,sex:t.sex,avatar:t.avatar,city:t.city,fl:t.fl};SDW_WEB.Store.set(SDW_WEB.localItem,o,!0),localStorage.setItem(window.DATAITEM,JSON.stringify(o)),dialog.show("ok","登录成功",1),o.secheme=+new Date,o.token=SDW_WEB.MD5(""+SDW_WEB.channel+o.uid+o.secheme+o.otoken),SDW_WEB.USER_INFO=o,e.$emit("login-ok"),e.show=0}else dialog.show("error",t.msg,1)},!1)}else dialog.show("error","请输入正确的验证码",1);else dialog.show("error","请输入正确的手机号",1)}},computed:{showLogin:function(){return this.show||!1}},watch:{showLogin:function(t){var e=this;t?(this.tapTimer&&clearTimeout(this.tapTimer),this.tapTimer=setTimeout(function(){document.addEventListener("touchmove",e.forbidScroll,!1)},200)):(this.tapTimer&&clearTimeout(this.tapTimer),document.removeEventListener("touchmove",e.forbidScroll,!1))}}}},function(t,e,o){function n(){i(document.querySelectorAll('img[data-loaded="0"]'))}function i(t){for(var e=0,o=t.length;e<o;e++)t[e].getBoundingClientRect().top<document.documentElement.clientHeight&&!t[e].isLoad&&(t[e].isLoad=!0,t[e].dataset.loaded="1",t[e].style.cssText="transition: ''; opacity: 0;",a(t[e],t[e].dataset.src))}function a(t,e){if(e){var o=new Image;o.onload=function(){t.src=o.src,t.style.cssText="transition: 1s; opacity: 1;";var e=t.parentNode;e&&e.classList.contains("game-cover-info")&&(e.style.transition=".4s",e.style.background="rgba(0,0,0,0)")},o.src=e}}function s(){l=new Clipboard(".game-code"),l.on("success",function(t){dialog.show("ok","礼包码已经复制到剪切板，快去玩游戏吧",1)}),l.on("error",function(t){dialog.show("error","请长按礼包码进行复制",1)}),h.onclick=function(){_.checkGameSate()},g.onclick=function(t){"gift-bg-container"===t.target.className&&c("none")}}function r(t){f.dataset.clipboardText=t,f.innerText=t}function c(t){g.style.display=t}var l,u=o(4),d=o(5),g=document.querySelector(".gift-bg-container"),f=document.querySelector(".game-code"),h=document.querySelector(".goto-game-btn");o(2),o(3);var m=0,p={giftPage:0,isLoad:!1,currentGame:0,currentGame_screen:0,showGift:0,giftCode:"",giftLists:[],gamesMap:{},giftsMap:{}},_=new Vue({el:"#app",data:p,methods:{createGameMap:function(t){t=t||[];for(var e=0;e<t.length;e++){var o=t[e];p.gamesMap[o.id]||(o._mygid=m++,p.gamesMap[o.id]=o)}},createGiftMap:function(t){t=t||[];for(var e=0;e<t.length;e++){var o=t[e];p.giftsMap[o.gid]||(p.giftsMap[o.gid]=[]),o._hasGet=0,p.giftsMap[o.gid].push(o)}},loadGiftsList:function(){var t=this;if(!t.isLoad){t.isLoad=!0;var e=SDW_WEB.URLS.addParam({token:SDW_WEB.USER_INFO.token,sec:SDW_WEB.USER_INFO.secheme,page:t.giftPage},!1,HTTP_STATIC+"gift");SDW_WEB.getAjaxData(e,function(e){if(1===e.result&&e.gift&&e.gift.length){t.createGameMap(e.game),t.createGiftMap(e.gift);var o=[];for(var i in p.gamesMap){var a={};a.id=i,a._mygid=p.gamesMap[i]._mygid,a.icon=p.gamesMap[i].icon,a.name=p.gamesMap[i].name,a.sub=p.gamesMap[i].sub,a.list=p.giftsMap[i],o.push(a)}o=o.sort(function(t,e){return t._mygid-e._mygid}),p.giftLists=o,t.$nextTick(function(){0===t.giftPage&&s(),t.giftPage++,setTimeout(function(){t.isLoad=!1},300),setTimeout(function(){n()},200)})}})}},computedQuantity:function(t){return t.num/t.count*100>>0},showCurrentCode:function(){SDW_WEB.onShandw&&(SDW_WEB.sdw.setClipboard(this.giftCode),dialog.show("ok","复制成功，快快去游戏中领取吧",1))},setCopyContext:function(t){r(t),c("block"),SDW_WEB.onShandw?(SDW_WEB.sdw.setClipboard(t),dialog.show("ok","礼包码已经复制到剪切板，快去玩游戏吧",1)):dialog.hidden()},checkGiftState:function(t){var e=this;if(!SDW_WEB.USER_INFO.uid)return void(SDW_WEB.onShandw?SDW_WEB.sdw.openLogin({success:function(){}}):this.$refs.login.show=1);if(e.currentGame=t.gid,e.currentGame_screen=t.screen,t._hasGet)this.showGift=1,this.giftCode=t.code,this.setCopyContext(t.code);else{dialog.show("loading","礼包领取中");var o=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,token:SDW_WEB.USER_INFO.token,sec:SDW_WEB.USER_INFO.secheme,uid:SDW_WEB.USER_INFO.uid,gid:t.gid,id:t.id},!1,HTTP_STATIC+"getgift");SDW_WEB.getAjaxData(o,function(o){1==o.result?(t._hasGet=1,e.showGift=1,t.code=o.code,e.giftCode=o.code,e.setCopyContext(o.code)):dialog.show("error",o.msg,1)})}},checkGameSate:function(t){var e=SDW_WEB.USER_INFO.uid,o=SDW_PATH.GAME_URL("play",t||this.currentGame);if(e){var n={link:o,isFullScreen:!1,showMoreBtn:!0,title:" "};n=SDW_WEB._checkWebViewObject(n,{screen:this.currentGame_screen||0}),SDW_WEB.openNewWindow(n)}else SDW_WEB.onShandw?SDW_WEB.sdw.openLogin({success:function(){}}):this.$refs.login.show=1}},components:{giftItem:u,fastLogin:d}}),v=o(1);new v(n);SDW_WEB.onShandw?SDW_WEB.getSdwUserData().then(function(t){_.loadGiftsList()},function(){_.loadGiftsList()}):_.loadGiftsList();new v(function(){_.loadGiftsList()},!0,200,100)},function(t,e){},function(t,e){},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"scale21"}},[t.showLogin?o("div",{staticClass:"login-container"},[o("div",{staticClass:"mask-v2",on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.hidePage()}}}),t._v(" "),t.show?o("div",[o("i",{staticClass:"sdw-logo-v2"}),t._v(" "),o("div",{staticClass:"forms",attrs:{id:"loginForm-v2"}},[o("div",{staticClass:"inpus"},[o("i",{staticClass:"icons-v2 phone"}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneLoginData.phoneNum,expression:"phoneLoginData.phoneNum"}],staticClass:"long",attrs:{type:"text",placeholder:"输入手机号"},domProps:{value:t.phoneLoginData.phoneNum},on:{input:function(e){e.target.composing||(t.phoneLoginData.phoneNum=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"inpus"},[o("i",{staticClass:"icons-v2 code"}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneLoginData.phoneCode,expression:"phoneLoginData.phoneCode"}],staticClass:"short",attrs:{type:"text",placeholder:"输入验证码"},domProps:{value:t.phoneLoginData.phoneCode},on:{input:function(e){e.target.composing||(t.phoneLoginData.phoneCode=e.target.value)}}}),t._v(" "),o("div",{staticClass:"codenormal",attrs:{id:"getCode-v-2"},on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.getPhoneCode()}}},[t._v("\n                        "+t._s(t.phoneLoginData.message)+"\n                    ")])]),t._v(" "),o("div",{staticClass:"login-btn-v2",on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.phoneLogin(0)}}},[t._v("登"),o("span",{staticStyle:{width:"50px"}}),t._v("录\n                ")])])]):t._e()]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"gift-item"},[o("div",{staticClass:"gift-container-info"},[o("div",{staticClass:"gift-title"},[t._v(t._s(t.giftItem.name))]),t._v(" "),o("div",{staticClass:"gift-desc"},[t._v(t._s(t.giftItem.info))]),t._v(" "),t._t("gift-line")],2),t._v(" "),t._t("gift-btn")],2)},staticRenderFns:[]}}]);