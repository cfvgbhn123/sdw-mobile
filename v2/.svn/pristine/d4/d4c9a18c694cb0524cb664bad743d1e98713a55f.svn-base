!function(t){function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=12)}([function(t,n){t.exports=function(t,n,e,a){var i,o=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,o=t.default);var c="function"==typeof o?o.options:o;if(n&&(c.render=n.render,c.staticRenderFns=n.staticRenderFns),e&&(c._scopeId=e),a){var r=c.computed||(c.computed={});Object.keys(a).forEach(function(t){var n=a[t];r[t]=function(){return n}})}return{esModule:i,exports:o,options:c}}},function(t,n){function e(t,n,e,a){return"function"!=typeof t?void console.log("WindowScroll error: callback must be a Function!"):(this.toBottom=n||!1,this.enable=!0,this.callback=t||null,this.delayTime=e||200,this.offset=a||200,this.clientHeigth=document.documentElement.clientHeight||document.body.clientHeight,void this._init())}e.prototype._init=function(){var t=this;t.timer=null,t.callback&&window.addEventListener("scroll",function(n){if(t.enable){var e=document.body.scrollTop+t.clientHeigth,a=document.documentElement.scrollHeight-t.offset,i=e>=a,o=1==t.toBottom&&i||0==t.toBottom;o&&!t.timer&&(t.timer=setTimeout(function(){t.callback(n),t.timer=null},t.delayTime))}},!1)},e.prototype.setCallback=function(t){"function"==typeof t?self.callback=t:console.log("[WindowScroll error]: callback must be a Function!")},e.prototype.runCallback=function(){this.callback&&this.callback()},t.exports=e},function(t,n){},function(t,n){},function(t,n,e){e(8);var a=e(0)(e(6),e(10),null,null);t.exports=a.exports},function(t,n,e){e(9);var a=e(0)(e(7),e(11),null,null);t.exports=a.exports},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"task-item",data:function(){return{}},methods:{},computed:{}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"gameItem",data:function(){return{onShandw:SDW_WEB.onShandw}},props:["index","background"],methods:{checkNavState:function(t){var n={0:"index/?",1:"rank/?",2:"task/?",3:"home/?"};if(this.index==t.index);else{var e=t.index;if(0!=e&&!SDW_WEB.USER_INFO.uid)return void this.$emit("show-login",e);location.href=SDW_WEB.MOBILE_ROOT+n[""+e]+SDW_WEB.URLS.spliceParam()}}},computed:{footerClass:function(){return this.background?"footer footer-bg":"footer"},navList:function(){for(var t=parseInt(this.index)||0,n=["首页","排行","成就","我"],e=["icon icon-main","icon icon-rank","icon icon-task","icon icon-me"],a=[],i=0;i<n.length;i++){var o={};o.title=n[i],o.icon=e[i],o.select=i==t,o.select&&(o.icon+=" icon-select"),a.push(o)}return a}}}},function(t,n){},function(t,n){},function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;t._self._c||n;return t._m(0)},staticRenderFns:[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-more"},[e("i",{staticClass:"icon-loading"}),t._v(" "),e("span",{staticClass:"loading-text"},[t._v("努力加载中...")])])])}]}},function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.navList.length&&!t.onShandw?e("div",{class:t.footerClass},t._l(t.navList,function(n,a){return e("div",{directives:[{name:"tap",rawName:"v-tap.self.stop",value:{methods:t.checkNavState,item:n,index:a},expression:"{methods:checkNavState,item:item,index:index}",modifiers:{self:!0,stop:!0}}],staticClass:"bottom-nav"},[e("i",{class:n.icon}),t._v(" "),n.select?t._e():e("p",{staticClass:"title"},[t._v(t._s(n.title))]),t._v(" "),n.select?e("i",{staticClass:"light"}):t._e()])})):t._e()},staticRenderFns:[]}},function(t,n,e){function a(t){var n=Math.max(0,t>>0);n=Math.min(10,n);var e,a=[],i=n/2>>0,o=n%2;for(e=0;e<i;e++)a.push("star2");for(1==o&&(a.push("star1"),i++),e=i;e<5;e++)a.push("star0");return a}function i(){var t=document.querySelectorAll('img[data-loaded="0"]');o(t)}function o(t){for(var n=0,e=t.length;n<e;n++)t[n].getBoundingClientRect().top<document.documentElement.clientHeight&&!t[n].isLoad&&(t[n].isLoad=!0,t[n].dataset.loaded="1",t[n].style.cssText="transition: ''; opacity: 0;",s(t[n],t[n].dataset.src))}function s(t,n){if(n){var e=new Image;e.onload=function(){t.src=e.src,t.style.cssText="transition: 1s; opacity: 1;";var n=t.parentNode;n&&n.classList.contains("game-cover-info")&&(n.style.transition=".4s",n.style.background="rgba(0,0,0,0)")},e.src=n}}var c=e(5),r=e(4);e(3),e(2);var l={onShandw:SDW_WEB.onShandw,pageHasLoading:!1,rankNavType:3,activeRankTops:[{avatar:"",nick:"虚位以待",scole:0},{avatar:"",nick:"虚位以待",scole:0},{avatar:"",nick:"虚位以待",scole:0}],richRankTops:[{avatar:"",nick:"虚位以待",scole:0},{avatar:"",nick:"虚位以待",scole:0},{avatar:"",nick:"虚位以待",scole:0}],hotRankTops:[{id:"",cover:"",title:"虚位以待",starLists:a(0),quantity:"",desc:"",time:""},{id:"",cover:"",title:"虚位以待",starLists:a(0),quantity:"",desc:"",time:""},{id:"",cover:"",title:"虚位以待",starLists:a(0),quantity:"",desc:"",time:""}],hotRankList:[],activeRankList:[],richRankList:[],hotRanks:{isLoad:!1,page:0,hasMoreData:!0},activeRanks:{isLoad:!1,page:0,hasMoreData:!0},richRanks:{isLoad:!1,page:0,hasMoreData:!0}},u={checkPlayState:function(t){var n=SDW_WEB.USER_INFO.uid,e={gid:t.id,channel:SDW_WEB.channel},a=SDW_WEB.MOBILE_ROOT+"game/",i=SDW_WEB.URLS.addParam(e,!1,a);n?SDW_WEB.openNewWindow({link:i,isFullScreen:!1,showMoreBtn:!0,title:""}):SDW_WEB.onShandw?SDW_WEB.sdw.openLogin({success:function(){SDW_WEB.getSdwUserData().then(function(t){alert(JSON.stringify(SDW_WEB.USER_INFO))})}}):this.__showLoginPage()},transformQuantity:SDW_WEB.transformQuantity,checkUserNick:function(t){var n=t.nick||"";return n=n.replace(/\s/gi,""),""==n?t.id:n},changeRankListState:function(t){this.pageHasLoading||(this.rankNavType=t,f.enable=1==t,v.enable=2==t,p.enable=3==t,1==t&&0==this.hotRanks.page&&this.hotRankScroll(),2==t&&0==this.activeRanks.page&&this.activeRankScroll(),3==t&&0==this.richRanks.page&&this.richRankScroll())},slotAjax:function(t,n,e,a){var o=this,s=SDW_WEB.URLS.addParam({channel:SDW_WEB.channel,uid:SDW_WEB.USER_INFO.uid,token:SDW_WEB.USER_INFO.token,sec:SDW_WEB.USER_INFO.secheme,type:e,page:t.page},!1,HTTP_STATIC+"ranking");this.pageHasLoading=!0,SDW_WEB.getAjaxData(s,function(n){o.pageHasLoading=!1,1==n.result&&(n.list=n.list||[],a(n)),o.$nextTick(function(){i(),setTimeout(function(){t.isLoad=!1},300)})})},hotRankScroll:function(){var t=this.hotRanks,n=this.hotRankList;!t.isLoad&&t.hasMoreData&&(t.isLoad=!0,this.slotAjax(t,n,1,function(e){if(0==e.list.length)return void(t.hasMoreData=!1);var i=e.list,o=0,s=[];if(0==t.page){var c=Math.min(3,i.length);o=c;for(var r=0;r<c;r++){var l=i[r];d.hotRankTops[r]={id:l.id,cover:l.icon,title:l.name,starLists:a(l.vStar),quantity:l.vPv,desc:l.sub}}}for(var r=o;r<i.length;r++){var l=i[r];s.push({id:l.id,cover:l.icon,title:l.name,starLists:a(l.vStar),quantity:l.vPv,desc:l.sub})}n=n.concat(s),t.page++,d.hotRankList=n}))},richRankScroll:function(){var t=this.richRanks,n=this.richRankList;!t.isLoad&&t.hasMoreData&&(t.isLoad=!0,this.slotAjax(t,n,4,function(e){if(0==e.list.length)return void(t.hasMoreData=!1);var a=e.list,i=0,o=[];if(0==t.page){var s=Math.min(3,a.length);i=s;for(var c=0;c<s;c++)d.richRankTops[c]=a[c]}for(var c=i;c<a.length;c++){var r=a[c];o.push(r)}n=n.concat(o),t.page++,d.richRankList=n}))},activeRankScroll:function(){var t=this.activeRanks,n=this.activeRankList;!t.isLoad&&t.hasMoreData&&(t.isLoad=!0,this.slotAjax(t,n,2,function(e){if(0==e.list.length)return void(t.hasMoreData=!1);var a=e.list,i=0,o=[];if(0==t.page){var s=Math.min(3,a.length);i=s;for(var c=0;c<s;c++)d.activeRankTops[c]=a[c]}for(var c=i;c<a.length;c++){var r=a[c];o.push(r)}n=n.concat(o),t.page++,d.activeRankList=n}))},ajaxData:function(t,n){$.ajax({type:"GET",url:t,dataType:"jsonp",jsonp:"cb",timeout:18e5,jsonpCallback:"callFn"+ +new Date+(65536*(1+Math.random())|0).toString(16).substring(1),success:function(t,e){n&&n(t)},error:function(t,n){console.log("[AJAX ERROR]:",t,n)}})}},d=new Vue({el:"#app",data:l,methods:u,components:{sdwFooter:c,loadingView:r}}),h=e(1),f=(new h(i),new h(function(){d.hotRankScroll()},!0,200,10));f.enable=!1;var v=new h(function(){d.activeRankScroll()},!0,200,10);v.enable=!1;var p=new h(function(){d.richRankScroll()},!0,200,10);p.enable=!1,SDW_WEB.onShandw?SDW_WEB.getSdwUserData().then(function(){d.changeRankListState(3)},function(){alert("没有登录"),SDW_WEB.sdw.openLogin({success:function(){}})}):d.changeRankListState(3)}]);