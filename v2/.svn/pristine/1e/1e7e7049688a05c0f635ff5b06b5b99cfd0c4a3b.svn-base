!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){var n={},i=navigator.userAgent;n.onIOS=!!i.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),n.onMobile=!!i.match(/AppleWebKit.*Mobile.*/),n.onIPhone=i.indexOf("iPhone")>-1,n.onIPad=i.indexOf("iPad")>-1,n.onAndriod=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,n.onWP=i.indexOf("Windows Phone")>-1,n.onQQBrowser=i.indexOf("QQBrowser")>-1,n.onMQQBrowser=i.indexOf("MQQBrowser")>-1,n.onWeiXin=i.indexOf("MicroMessenger")>-1,n.onWeiBo=i.indexOf("Weibo")>-1,n.onQQ=n.onIOS?i.indexOf("QQ")>-1:n.onMQQBrowser&&!n.onWeiXin,n.onPC=!n.onMobile,n.onKD=/KDM3G/.test(i)||/KDM3GNEW/.test(i)||"undefined"!=typeof kdjs||"undefined"!=typeof callKDMSGToResponse,n.width=document.documentElement.clientWidth||document.body.clientWidth,n.height=document.documentElement.clientHeight||document.body.clientHeight,n.onShandw=/Shandw/.test(navigator.userAgent),n.os=0,n.onIOS?n.os=2:n.onAndriod&&(n.os=1),n.getNow=function(){return+new Date},e.exports=n},function(e,t,n){var i="_Store_CHEN_",o={CACHE_KEY:i,supportSession:!1,supportLocal:!1,supportStorage:!1,CACHE_MAP_LOCAL:{},CACHE_MAP_SESSION:{},REG_FLAG:new RegExp(i)};o._init=function(){this.supportSession=this.supportType("sessionStorage"),this.supportLocal=this.supportType("localStorage"),this.supportStorage=this.supportSession&&this.supportLocal},o.supportType=function(e){return window[e]},o.set=function(e,t,n){if(this.supportStorage){e+=this.CACHE_KEY;var i=JSON.stringify({timestamp:+new Date,data:t});n?window.localStorage[e]=i:window.sessionStorage[e]=i}},o.get=function(e,t){if(!this.supportStorage)return null;e+=this.CACHE_KEY;var n=t?window.localStorage[e]:window.sessionStorage[e],i=n?JSON.parse(n).data:null;return i},o.clearItem=function(e,t){this.supportStorage&&(e+=this.CACHE_KEY,t?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e))},o.getAll=function(e){if(!this.supportStorage)return null;var t={},n=e?window.localStorage:window.sessionStorage;for(var i in n)if(n.hasOwnProperty(i)){var o=i.replace(this.REG_FLAG,""),a=this.get(o,e);a&&(t[o]=this.get(o,e))}return t},o.clearAll=function(e){if(this.supportStorage){var t=e?window.localStorage:window.sessionStorage;for(var n in t)t.hasOwnProperty(n)&&this.REG_FLAG.test(n)&&t.removeItem(n)}},o._getCache=function(e,t){var n=null;return t&&this.supportLocal&&(n=this.CACHE_MAP_LOCAL[e]),!t&&this.supportSession&&(n=this.CACHE_MAP_SESSION[e]),n},o._setCache=function(e,t,n){n&&this.supportLocal&&(this.CACHE_MAP_LOCAL[e]=t),!n&&this.supportSession&&(this.CACHE_MAP_SESSION[e]=t)},o._clearCache=function(e,t){t&&this.supportLocal&&this._setCache(e,null,t),!t&&this.supportSession&&this._setCache(e,null,t)},o._init(),e.exports=o},function(e,t){var n={URL_MAP:{}};n.queryUrl=function(e,t){if(t=t||location.search||"",t=t.indexOf("#")!=-1?t.split("#")[0]:t,t=t.indexOf("?")!=-1?t.split("?")[1]:t,this.URL_MAP[t])return this.URL_MAP[t];for(var n,i,o,a={},r=t.length?t.split("&"):[],c=0;c<r.length;c++)n=r[c].split("="),i=e?this.decodeURI(n[0]):n[0],o=e?this.decodeURI(n[1]):n[1],i.length&&(a[i]=o);return this.URL_MAP[t]=a,a},n.param=function(e,t){"object"!=typeof e&&(e={});var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=t?this.encodeURI(e[i]):e[i];n.push(i+"="+o)}return n.join("&")},n.addParam=function(e,t,n){var i=this.param(e,t);return n=n||location.href||"",n.indexOf("?")==-1?n+"?"+i:n+i},n.replaceState=function(e){0!=arguments.length&&history.replaceState&&history.replaceState({},"",e)},n.encodeURI=function(e){return e=e||"",encodeURIComponent(e)},n.decodeURI=function(e){return e=e||"",decodeURIComponent(e)},n.spliceParam=function(e){return e=e||location.href,e.indexOf("?")!=-1?"?"+e.split("?")[1]:""},e.exports=n},function(e,t){var n;window.NativeBridge,window.sdwShareState={jsApiTicket:"",hasWXConfig:!1,queueWXCallback:null,successCallback:null,failCallback:null,initWXConfig:function(){if(this.jsApiTicket){var e=this,t=this.jsApiTicket,n=GUID(),i=+new Date/1e3>>0,o=location.href.split("#")[0],a="jsapi_ticket="+t+"&noncestr="+n+"&timestamp="+i+"&url="+o,r=hex_sha1(a);wx.config({debug:!1,appId:"wxfd695e777664b347",timestamp:i,nonceStr:n,signature:r,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){e.hasWXConfig=!0,e.queueWXCallback&&e.configWXShare(e.queueWXCallback)})}},checkCallbackFn:function(e,t){"function"==typeof e[t]?this[t+"Callback"]=function(){window.parent===window?e[t]():window.postMessage(JSON.stringify({postSdwData:!0,oprate:"shareCallback_"+t}),"*")}:this[t+"Callback"]=function(){}},configWXShare:function(e){if(this.jsApiTicket)if(this.hasWXConfig){this.checkCallbackFn(e,"success"),this.checkCallbackFn(e,"fail");for(var t=0;t<e.target.length;t++)wx["onMenuShare"+e.target[t]]({title:e.title||document.title,desc:e.desc||"",link:e.link||location.href.split("#")[0],imgUrl:e.imgUrl,success:this.successCallback,fail:this.failCallback})}else this.queueWXCallback=e,this.initWXConfig()}},function(){var e={},t=navigator.userAgent;e.ky=window.parent!==window,e.onIOS=!!t.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),e.onMobile=!!t.match(/AppleWebKit.*Mobile.*/),e.onIPhone=t.indexOf("iPhone")>-1,e.onIPad=t.indexOf("iPad")>-1,e.onAndriod=t.indexOf("Android")>-1||t.indexOf("Adr")>-1,e.onWP=t.indexOf("Windows Phone")>-1,e.onQQBrowser=t.indexOf("QQBrowser")>-1,e.onMQQBrowser=t.indexOf("MQQBrowser")>-1,e.onBaiduBrowser=t.indexOf("Baidu")>-1,e.onUCBrowser=t.indexOf("UCBrowser")>-1,e.onLiebao=t.indexOf("LieBao")>-1,e.onSogo=t.indexOf("Sogou")>-1,e.onWeiXin=t.indexOf("MicroMessenger")>-1,e.onWeiBo=t.indexOf("Weibo")>-1,e.onQQ=e.onIOS?t.indexOf("QQ")>-1:e.onMQQBrowser&&!e.onWeiXin,e.onPC=!e.onMobile,e.onKD=/KDM3G/.test(navigator.userAgent)||/KDM3GNEW/.test(navigator.userAgent)||"undefined"!=typeof kdjs||"undefined"!=typeof callKDMSGToResponse,e.width=document.documentElement.clientWidth||document.body.clientWidth,e.height=document.documentElement.clientHeight||document.body.clientHeight,e.onShandw=/Shandw/.test(navigator.userAgent),e.onKD&&e.onAndriod&&(e.and_KdVer=parseInt(kdjs.getKDVersion().replace(/\D/g,""))),NativeBridge={name:"sdwJs",loadJs:1,callbacksCount:1,callbacks:{goBackstage:null,recoverBackstage:null},resultForCallback:function(e,t){var n=NativeBridge.callbacks[e];n?n(t):setTimeout(function(){},10)},objectToString:function(e){var t={};for(var n in e)"function"==typeof e[n]?t[n]=e[n].toString():t[n]=e[n];return JSON.stringify(t)},call:function(t,n,i,o){var a=i&&"function"==typeof i,r=a?NativeBridge.callbacksCount++:-1,c=!1;if(e.ky&&a&&"quickPayment"!=t){var s=JSON.stringify({optionStr:this.objectToString(o),functionName:t,callbackId:r,args:n,postSdwData:!0,operate:"createNativeBridgeCallback"});window.parent.postMessage(s,"*"),c=!0}if(a&&(sessionStorage["NativeBridge_callbacks"+r]=i.toString(),NativeBridge.callbacks[r]=i),!c){var l=JSON.stringify({callbackId:r,args:n}),d="quickPayment"==t?"payment://":"sdw://";d+=t+"#"+l;var u=document.createElement("IFRAME");u.src=d,document.documentElement.appendChild(u),u.parentNode.removeChild(u),u=null}}},n={cachePayHandler:null,JsApiTicket:"",debug:1,loadJs:1,pre_callbacks:[],onShandw:/Shandw/.test(navigator.userAgent),init_load:function(){var e=this,t=document.createElement("script");t.src="",document.getElementsByTagName("head")[0].appendChild(t),t.onload=function(){if(e.loadJs=1,e.pre_callbacks.length)for(var t=0;t<e.pre_callbacks.length;t++){var n=e.pre_callbacks[t];n.cb(n.args)}}},log:function(e){this.debug&&alert(e)},hasSDK:function(){var e=/WangZuo/.test(navigator.userAgent),t="undefined"!=typeof CDLAndroid,n=/KDM3GNEW/.test(navigator.userAgent);return t||n||e},selectImg:function(){var e=document.getElementsByTagName("img");return e?e[0].src:""},createCallback:function(e){var t=this;return function(n){try{var i=JSON.parse(n);0==i.result?e.fail&&e.fail(i):1==i.result?e.success&&e.success(i):2==i.result&&e.cancel&&e.cancel(i)}catch(e){t.log(e)}}},createSDKCallback:function(e){var t=this;return function(n){var i=t.createPayData(e);e.complete&&setTimeout(function(){e.complete(i)},20)}},createPayData:function(e){var t={};return t.channel=e.channel,t.appId=e.appId,t.cpOrderId=e.cpOrderId,t.timestamp=e.timestamp,t.accountId=e.accountId,t.amount=e.amount,t.memo=e.memo,t},checkOptionCallback:function(e){for(var t=!0,n=["success","fail","cancel","complete"],i=0;i<n.length;i++)e[n[i]]&&(t=t&&"function"==typeof e[n[i]]);return t||this.log("Function类型错误"),t},checkOptionArguments:function(e,t){for(var n=0;n<t.length;n++)if(!e.hasOwnProperty(t[n]))return{result:0,msg:"参数"+t[n]+"有误"};return{result:1}},getAPPInfo:function(e){if(this.checkOptionCallback(e)){var t=this.createCallback(e);NativeBridge.call("getAPPInfo",null,t,e)}},getUserInfo:function(e){if(this.checkOptionCallback(e)){var t=this.createCallback(e);NativeBridge.call("getUserInfo",null,t,e)}},notifyToAPP:function(e){var t,n=[];if("playGame"==e.type)n=["id","icon","name","time"];else{if("isGame"!=type)return void this.log("缺少type类型");e.show=e.show||0}return t=this.checkOptionArguments(e,n),0==t.result?void this.log(t.msg):void NativeBridge.call("notifyToAPP",e)},requestFullScreen:function(e){if(this.checkOptionCallback(e)){var t=this.createCallback(e);NativeBridge.call("requestFullScreen",e,t)}},exitFullScreen:function(e){if(this.checkOptionCallback(e)){var t=this.createCallback(e);NativeBridge.call("exitFullScreen",e,t)}},closeWindow:function(){NativeBridge.call("closeWindow",null)},goBackWindow:function(){NativeBridge.call("goBackWindow",null)},openLogin:function(e){if(this.checkOptionCallback(e)){var t=this.createCallback(e);NativeBridge.call("openLogin",null,t)}},openWindow:function(e){var t;return e.link?/http(s)?\:\/\//.test(e.link)||(t="参数[link]格式错误！"):t="缺少参数[link]",t?void this.log(t):void NativeBridge.call("openWindow",e)},onShareOperation:function(e){e.target=e.target||"",e.title=e.title||document.title,e.link=e.link||location.href,e.description=e.description||"",e.icon=e.icon||this.selectImg();var t=this.createCallback(e);NativeBridge.call("onShareOperation",e,t)},changeShareOperation:function(e){var t;if(e.target=e.target||"",e.title=e.title||document.title,e.link=e.link||location.href,e.description=e.description||"",e.icon=e.icon||this.selectImg(),t)return void this.log(t);var n=this.createCallback(e);NativeBridge.call("changeShareOperation",e,n)},goBackstage:function(e){e&&"function"==typeof e?(NativeBridge.callbacks.goBackstage=e,NativeBridge.call("goBackstage",null)):this.log("Function参数错误")},recoverBackstage:function(e){e&&"function"==typeof e?(NativeBridge.callbacks.recoverBackstage=e,NativeBridge.call("recoverBackstage",null)):this.log("Function参数错误")},appCallJs:function(e){e&&"function"==typeof e?NativeBridge.call("appCallJs",null,e):this.log("Function参数错误")},checkWebJsFile:function(){return"undefined"!=typeof dhpayObj||(this.log("请检查是否引入支付文件"),!1)},chooseSDWPay:function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}t=t||{};var n=this.checkOptionArguments(t,["subject","appId","gameName","accountId","amount","memo","cpOrderId","sign","timestamp","channel"]);if(t.paychannel=t.paychannel||"",0==n.result)return void this.log(n.msg);if(this.checkOptionCallback(t)){if(this.onShandw||this.hasSDK()){var i=this.createSDKCallback(t);/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.cachePayHandler=function(){NativeBridge.call("quickPayment",JSON.stringify(t),i,t)}:this.cachePayHandler=function(){CDLAndroid.quickPayment(JSON.stringify(t)),window.onDHSDKResult=i}}else{var o={postjson:{},resultpost:!0,config:{alipay:!0,weixin:!0}};for(var a in t)if("success"!=a&&"fail"!=a&&"cancel"!=a&&"complete"!=a&&"paychannel"!=a&&(o.postjson[a]=t[a]),"complete"==a&&"function"==typeof t.complete){var r=this.createPayData(t);o.closecallback=function(){t.complete(r)}}if(o.closecallback||(o.closecallback=function(){}),""!=t.paychannel){var c="weixin"==t.paychannel;o.config.alipay=!c,o.config.weixin=c}e.onKD&&e.onAndriod&&e.and_KdVer<402&&(o.config.alipay=!1),this.cachePayHandler=function(){dhpayObj&&dhpayObj.payfor(o)}}e.ky&&(console.log("check"),window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"checkVisitorMode"}),"*"))}},onSetShareOperate:function(t){var n=this.clone(t),i={postSdwData:!0,operate:"setSDWShareInfo"};if(console.log("SHARE.OPTION: ",n),e.onWeiXin){var o=["AppMessage","Timeline","QQ","Weibo","QZone"];if(i.source="weixin","undefined"==typeof n.target||""==n.target)n.target=o;else{for(var a=n.target.replace(/weixin:/g,"").split(","),r=[],c=0;c<a.length;c++)o.indexOf(a[c])!=-1&&r.push(a[c]);n.target=r}}"function"!=typeof n.success&&(n.success=function(){}),"function"!=typeof n.fail&&(n.fail=function(){}),i.shareInfo=n,e.ky?parent.postMessage(JSON.stringify(i),"*"):(e.onWeiXin&&sdwShareState.configWXShare(n),console.log("非IFRAME模式下暂未开放"))},closeSDWPay:function(){this.onShandw||this.hasSDK()||(e.ky&&e.onWeiXin?window.parent.postMessage(JSON.stringify({operate:"requestHideQrcode"}),"*"):dhpayObj&&dhpayObj.hidepay())},createDesktop:function(e){e.title=e.title||document.title,e.link=e.link||location.href,e.icon=e.icon||"";var t=this.createCallback(e);NativeBridge.call("createDesktop",e,t)},clone:function(e){if("object"==typeof e){var t={};for(var n in e)t[n]=e[n]}return t}},e.ky&&window.addEventListener("message",function(e){console.log(e.data);try{var t=JSON.parse(e.data);if(t.postSdwData){var i=t.oprate;"shareCallback_success"==i&&sdwShareState.successCallback(),"shareCallback_fail"==i&&sdwShareState.failCallback(),"choosePayCheckState_ok"==i&&(console.log("choosePayCheckState_ok"),console.log(n.cachePayHandler),n.cachePayHandler&&n.cachePayHandler())}}catch(e){}},!1)}(),e.exports=n},function(e,t,n){function i(){var e=SDW_WEB.queryParam.channel;return e="undefined"!==e&&/^\d+$/.test(e)?e||"10000":"10000"}var o=n(3);window.SDW_WEB=n(0),SDW_WEB.Store=n(1),SDW_WEB.URLS=n(2),SDW_WEB.queryParam=SDW_WEB.URLS.queryUrl(!0),SDW_WEB.sdw=o,SDW_WEB.channel=i(),SDW_WEB.localItem="SDW_USER_DATA_"+SDW_WEB.channel;var a=SDW_WEB.queryParam.url_Type;a&&(SDW_WEB.localItem+=a),SDW_WEB.getUserInfo=function(e,t){var n={qq:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=101359011&redirect_uri=URLREPLACE&scope=get_user_info&state=123456&display=mobile",wb:"https://api.weibo.com/oauth2/authorize?client_id=530008665&redirect_uri=URLREPLACE&response_type=code",wx:"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxfd695e777664b347&redirect_uri=URLREPLACE&response_type=code&scope=snsapi_userinfo&state=125455#wechat_redirect"};if(!this.onShandw&&"m3g"!=this.queryParam.s_from){var i=this.Store.get(this.localItem,!0);if(i)this.USER_INFO=i,this.onKD&&JSON.parse(sessionStorage.KD_USER).uid!=this.USER_INFO.uid&&(location.href=t),e&&e(i);else{if("string"!=typeof t||!/^(https|http)/.test(t))return void console.log("[SDW_WEB.getUserInfo]: authUrl 参数必须是回调地址");if(this.onWeiXin)location.href=n.wx.replace(/URLREPLACE/,encodeURIComponent(t));else if(this.onKD)location.href=t;else if(this.onQQ||this.onQQBrowser)location.href=n.qq.replace(/URLREPLACE/,encodeURIComponent(t));else if(this.onWeiBo)location.href=location.href=n.wb.replace(/URLREPLACE/,encodeURIComponent(t));else{var o=this.queryParam.lg_to,a=this.queryParam.gid;if("1247433539"==a)return void(location.href="https://www.shandw.com/mobile/message/jueZhan/?channel="+this.channel);o?location.href="https://www.shandw.com/mobile/message/"+o+"/?channel="+this.channel+"&lg_to="+o+"&gid="+a:location.href="https://www.shandw.com/mobile/login.html?lg_to="+encodeURIComponent(location.href)+"&channel="+this.channel}}}},SDW_WEB.changeUrl=function(){var e=location.href;if(e.indexOf("channel")==-1&&(e+="&channel="+this.channel),e.indexOf("?")==-1)var t=e.replace(/&/,"?");else t=e;var n={foo:"bar"};history.replaceState(n,"",t)},SDW_WEB.changeUrl(),"1"==SDW_WEB.queryParam.apiTest?(window.HTTP_STATIC="http://192.168.110.148:9061/",window.HTTP_USER_STATIC="http://192.168.110.148:9060/"):(window.HTTP_STATIC="https://platform.shandw.com/",window.HTTP_USER_STATIC="https://auth.shandw.com/"),SDW_WEB.createGUI=function(e){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},n="SDW_GUID",i=this.Store.get(n,!0)||"";if(32!=i.length){i="";for(var o=0;o<e;o++)i+=t();this.Store.set(n,i,!0)}return i},SDW_WEB.guid=SDW_WEB.createGUI(8),function(e){var t=e.documentElement.clientWidth,n=t/375*16;n=Math.min(n,19),e.documentElement.style.fontSize=n+"px"}(document),document.addEventListener("DOMContentLoaded",function(){window.dialog={dom:null,msgCont:null,icons:null,timer:null,types:["ok","error","loading"],init:function(){$("body").append('<section class="dialogsCont"><section class="dialogs"><div id="icons"></div><div class="msg"></div></section></section>'),dialog.dom=$(".dialogsCont")[0],dialog.msgCont=$(".dialogs .msg")[0],dialog.icons=$("#icons")[0]},show:function(e,t,n){dialog.timer&&(clearTimeout(dialog.timer),dialog.timer=null),dialog.msgCont.innerHTML=t,dialog.icons.className="icon-"+e,dialog.dom.style.visibility="visible",dialog.dom.style.opacity="1",n&&dialog.hidden(2e3)},hidden:function(e){e=e||0,dialog.timer=setTimeout(function(){dialog.dom.style.visibility="hidden",dialog.dom.style.opacity="0",dialog.timer=null},e)}},dialog.init()},!1)}]);