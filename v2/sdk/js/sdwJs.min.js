!function(e){function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=3)}([function(e,n){var t={bannerSetting:null,initAd:function(e){if(sdw.dialogManage&&sdw.dialogManage.init(),t.bannerSetting=e||{},"12319"==sdw.params.channel||"12319"==e.channel){sdw.dynamicLoadCss("https://www.shandw.com/libs/css/styles.css?v="+(new Date).getTime());var n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");return a.className="intro-container",a.innerHTML='<img src="" /><div class="intro-txt"> <div class="txt-1"></div><div class="txt-2"></div></div><div class="intro-btn">查看</div>',n.className="mask-view",o.className="close-btn",o.innerHTML="关闭视频",n.appendChild(o),n.appendChild(a),o.onclick=function(){console.log("点击关闭按钮"),sdw.dialogManage.show({title:"是否关闭视频",msg:"观看完整视频才能获得奖励哦",btn:"取消",callback:function(){console.log("关闭弹窗"),t.video&&(t.videoView.style.display="none",t.videoView.removeChild(t.video),t.video=null)}})},a.onclick=function(){t&&t.adInfo&&t.adInfo.clickUrl&&window.parent.postMessage(JSON.stringify({postSdwData:!0,link:t.adInfo.clickUrl,operate:"to_competition"}),"*")},t.videoView=n,t.closebtn=o,{code:"200",msg:"广告支持"}}return{code:"101",msg:"当前渠道不支持广告"}},getAdInfo:function(){t.bannerSetting=t.bannerSetting||{};return new Promise(function(e,n){var o=sdw.params.uid||t.bannerSetting.uid;sdw.postAjaxData("https://platform.shandw.com/youKuTraffic",JSON.stringify({bid:sdw._MD5(String((new Date).getTime())),pid:"ali_uc_game_h",template_id:"ali448x252",image_size:"448x252",os:sdw.app.onIOS?"ios":"android",imei:sdw._MD5(o)}),function(n){if(1==n.result&&200==n.data.httpStatusCode){var o=n.data.model.materialResultDTO;o?(t.adInfo=o,t.state=1,e(t.state)):(t.state=-1,e(t.state))}else t.state=-2,e(t.state)})})},playRewardVideo:function(e){if(sdw.dialogManage.show({msg:"视频加载中",icon:"loading"}),t.adInfo&&t.adInfo.vedioUrl)return t.initVideo(e),t.initIntro(),void(t.adInfo.vedioUrl=null);t.getAdInfo().then(function(n){1==n?(t.initVideo(e),t.initIntro()):(sdw.dialogManage.hidden(),e&&e.playFail&&e.playFail("超出广告播放次数"))})},initIntro:function(){var e=document.querySelector(".intro-container img"),n=document.querySelector(".intro-container .txt-1"),o=document.querySelector(".intro-container .txt-2");if(t.adInfo&&(e.src="http://r1.ykimg.com/051600005CCA5219ADA7B2ABC10DC7BB",t.adInfo.title)){var a=t.adInfo.title.split("|");n.innerHTML=a[0]||"这就是街舞",o.innerHTML=a[0]||""}},initVideo:function(e){(new Image).src=t.adInfo.feedbackVedioUrl,t.video=document.createElement("video"),t.video.className="ad-container";var n=document.querySelector(".ad-container");n&&t.videoView.removeChild(n),t.videoView.appendChild(t.video),t.video.src=t.adInfo.vedioUrl,t.video.style.width="100%",t.video.style.height="100%",t.video.autoplay="autoplay",t.video.preload="preload",t.video.requestFullScreen?t.video.requestFullScreen():t.video.mozRequestFullScreen?t.video.mozRequestFullScreen():t.video.webkitRequestFullScreen?t.video.webkitRequestFullScreen():t.video.msRequestFullscreen&&t.video.msRequestFullscreen(),t.video.play(),t.videoView.style.display="block",t.video.oncanplay=function(){sdw.dialogManage.hidden(),t.video.play()},t.video.onended=function(){t.videoView.style.display="none",e&&e.playComplete&&e.playComplete(),t.videoView.removeChild(t.video),t.video=null},t.video.onerror=function(){sdw.dialogManage.hidden(),t.videoView.style.display="none",e&&e.playFail&&e.playFail("视频播放碰到了点问题"),t.videoView.removeChild(t.video),t.video=null},document.getElementsByTagName("body")[0].appendChild(t.videoView)},displayBanner:function(e){if(t.adInfo&&t.adInfo.imgUrl){return(new Image).src=t.adInfo.feedbackUrl,e.displayComplete&&e.displayComplete({banner:{icon:t.adInfo.imgUrl,link:t.adInfo.clickUrl},title:t.adInfo.title?t.adInfo.title.split("|")[0]:""}),void(t.adInfo.imgUrl=null)}t.getAdInfo(e).then(function(n){if(1!=n)return e&&e.displayFail&&e.displayFail("超出广告播放次数"),!1;(new Image).src=t.adInfo.feedbackUrl,e.displayComplete&&e.displayComplete({banner:{icon:t.adInfo.imgUrl,link:t.adInfo.clickUrl},title:t.adInfo.title?t.adInfo.title.split("|")[0]:""})})}};e.exports=t},function(e,n){var t={init:function(){var e=document.createElement("div");e.className="toast-container",e.innerHTML='<div class="dialog-icon"></div><div class="dialog-title"></div><div class="dialog-msg"></div><div class="btn-container"></div>',document.body&&(e.style.display="none",document.body.appendChild(e),t.container=document.querySelector(".toast-container"),t.msg=document.querySelector(".dialog-msg"),t.icon=document.querySelector(".dialog-icon"),t.title=document.querySelector(".dialog-title"),t.btnCtl=document.querySelector(".btn-container"))},hidden:function(e){e=e||0,t.timer=setTimeout(function(){t.container.style.visibility="hidden",t.container.style.opacity="0",t.timer=null},e)},show:function(e){if(e){t.title.innerHTML=e.title||"",t.msg.innerHTML=e.msg||"",t.icon.className="dialog-icon icon-"+e.icon,e.icon?t.btnCtl.style.display="none":t.btnCtl.style.display="flex",e.autoHide&&setTimeout(t.hidden,e.autoHide),t.btnCtl.innerHTML="";var n=document.createElement("div");if(n.className="dialog-btn",n.innerHTML="确定",n.onclick=function(){t.hidden(),e.callback&&e.callback()},t.btnCtl.appendChild(n),e.btn){var o=document.createElement("div");o.className="dialog-btn",o.innerHTML=e.btn,o.onclick=t.hidden,t.btnCtl.appendChild(o)}t.container.style.display="block",t.container.style.visibility="visible",t.container.style.opacity="1",t.container.style.height="auto"}}};e.exports=t},function(e,n){},function(e,n,t){t(2);var o={},a=navigator.userAgent;o.onIOS=!!a.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),o.onMobile=!!a.match(/AppleWebKit.*Mobile.*/),o.onIPhone=a.indexOf("iPhone")>-1,o.onIPad=a.indexOf("iPad")>-1,o.onAndriod=a.indexOf("Android")>-1||a.indexOf("Adr")>-1,o.onWP=a.indexOf("Windows Phone")>-1,o.onQQBrowser=a.indexOf("QQBrowser")>-1,o.onMQQBrowser=a.indexOf("MQQBrowser")>-1,o.onWeiXin=a.indexOf("MicroMessenger")>-1,o.onWeiBo=a.indexOf("Weibo")>-1,o.onSafari=a.indexOf("Safari")>-1,o.onQQ=o.onIOS?a.indexOf("QQ")>-1&&!(o.onMQQBrowser||o.onQQBrowser):o.onMQQBrowser&&!o.onWeiXin,o.onPC=!o.onMobile,o.QBCore=/QBCore/.test(a),o.onKD=/KDM3G/.test(a)||/KDM3GNEW/.test(a)||"undefined"!=typeof kdjs||"undefined"!=typeof callKDMSGToResponse,o.width=document.documentElement.clientWidth||document.body.clientWidth,o.height=document.documentElement.clientHeight||document.body.clientHeight,o.onShandw=/Shandw/.test(a),o.onMDZZHelper=/MDZZHelper/.test(a),o.onWeChat=/WindowsWechat/.test(a),o.onAliPay=/Alipay/.test(a),o.onJDJR=/JDJR/.test(a),o.onJZQ=/jinzhuquan/.test(a),o.onUC=/UCBrowser/.test(a),o.onQujianpan=/qujianpan/.test(a),o.onMicroSDWAPP=/Micro-SDW-APP/.test(a)||/Micro-SDW-APP-WapPay/.test(a),o.onShandwMicroGame=/Shandw-Micro-Game/.test(a),o.hasIOSMicroWapPay=/Micro-SDW-APP-WapPay/.test(a)||/WapPay-Shandw/.test(a),o.hasApplePay=/APPLE-PAY/.test(a),o.hasH5NativePay=/ONE-GAME-APP/.test(a),o.onAPPs=o.onMobile&&(o.onWeiXin||o.onQQ||o.onKD||o.onShandw||o.onWeiBo||o.onAliPay||o.onMDZZHelper),o.ky=window!==parent,o.landscape=/Landscape/.test(a),o.wxLoginPay=/WXLoginPay/.test(a),o.os=0,o.onIOS?o.os=o.onShandw||o.onMicroSDWAPP||o.hasIOSMicroWapPay?2:4:o.onAndriod&&(o.os=o.onShandw||o.onMicroSDWAPP||o.onShandwMicroGame?1:3),o.getNow=function(){return+new Date};var i=o;i.onKD&&i.onAndriod&&(i.and_KdVer=parseInt(kdjs.getKDVersion().replace(/\D/g,"")));window.NativeBridge={myData:"sdw",name:"sdwJs-cp.js",loadJs:1,callbacksCount:1,callbacks:{goBackstage:null,recoverBackstage:null,pullDownRefresh:function(){}},resultForCallback:function(e,n){var t=window.NativeBridge.callbacks[e];t?t(n):setTimeout(function(){},10)},objectToString:function(e){var n={};for(var t in e)"function"==typeof e[t]?n[t]=e[t].toString():n[t]=e[t];return JSON.stringify(n)},call:function(e,n,t,o,a){var s=t&&"function"==typeof t,r=s?window.NativeBridge.callbacksCount++:-1,d=!1;if(s&&(window.NativeBridge.callbacks[r]=t),i.ky&&s){var l=JSON.stringify({optionStr:this.objectToString(o),fncName:e,callbackId:r,args:n,postSdwData:!0,operate:"createNativeBridgeCallback"});window.parent.postMessage(l,"*"),d=!0}if(!d){var c=JSON.stringify({callbackId:r,args:n}),w="";"quickPayment"===e||"ApplePayment"===e?w="payment://":i.onShandw?w="sdw://":i.onKD?w="kd://":i.onMDZZHelper&&(w="mdzz://"),a&&(w=a+"://"),w+=e+"#"+c;var p=document.createElement("IFRAME");p.src=w,document.documentElement.appendChild(p),p.parentNode.removeChild(p),p=null}}};var s={_shareItems:["QQ","Timeline","AppMessage","Weibo","QZone"],_otherItems:["copyLink","followWeixin","addDesktop","customService"],_toolBarItems:["QQ","Timeline","AppMessage","Weibo","QZone","copyLink","followWeixin","addDesktop","customService"],checkShareItem:function(e){for(var n=s._toolBarItems.slice(0),t=0;t<n.length;t++)if(n[t]==e)return!0;return!1}};if(window.sdw={app:o,name:"CP-sdw",payMap:{},th_callback:[],cachePayHandler:null,JsApiTicket:"",debug:1,loadJs:1,pre_callbacks:[],onShandw:o.onShandw,isNativeGame:o.hasH5NativePay,hasApplePay:o.hasApplePay,customToolBarItems:[],dynamicLoadCss:function(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,n.appendChild(t)},init_load:function(){var e=this,n=document.createElement("script");n.src="",document.getElementsByTagName("head")[0].appendChild(n),n.onload=function(){if(e.loadJs=1,e.pre_callbacks.length)for(var n=0;n<e.pre_callbacks.length;n++){var t=e.pre_callbacks[n];t.cb(t.args)}}},log:function(e){this.debug&&alert(e)},hasSDK:function(){var e="undefined"!=typeof CDLAndroid,n=/WangZuo/.test(navigator.userAgent),t=/KDM3GNEW/.test(navigator.userAgent),a=o.hasIOSMicroWapPay,i=o.onIOS&&(o.onShandw||n||t||a);return/WapPayShandw/.test(navigator.userAgent)&&(i=!1),e||i},selectImg:function(){var e=document.getElementsByTagName("img");return e?e[0].src:""},createCallback:function(e){return function(n){try{var t=JSON.parse(n);0==t.result?e.fail&&e.fail(t):1==t.result?e.success&&e.success(t):2==t.result&&e.cancel&&e.cancel(t)}catch(t){/失败/.test(n)?e.fail&&e.fail({result:0,msg:n}):e.cancel&&e.cancel({result:2,msg:n})}}},createSDKCallback:function(e){var n=this;return function(t){var o=n.createPayData(e);e.complete&&setTimeout(function(){e.complete(o)},20)}},createPayData:function(e){var n={};return n.channel=e.channel,n.appId=e.appId,n.cpOrderId=e.cpOrderId,n.timestamp=e.timestamp,n.accountId=e.accountId,n.amount=e.amount,n.memo=e.memo,n},checkOptionCallback:function(e){for(var n=!0,t=["success","fail","cancel","complete"],o=0;o<t.length;o++)e[t[o]]&&(n=n&&"function"==typeof e[t[o]]);return n||this.log("Function类型错误"),n},checkOptionArguments:function(e,n){for(var t=0;t<n.length;t++)if(!e.hasOwnProperty(n[t]))return{result:0,msg:"参数"+n[t]+"有误"};return{result:1}},__sortToolBars:function(e){for(var n={firstLine:[],secondLine:[]},t=0;t<e.length;t++)for(var o=0;o<s._shareItems.length;o++)if(e[t]==s._shareItems[o]){n.firstLine.push(e[t]);break}for(var t=0;t<e.length;t++)for(var o=0;o<s._otherItems.length;o++)if(e[t]==s._otherItems[o]){n.secondLine.push(e[t]);break}return n},checkWebJsFile:function(){return"undefined"!=typeof dhpayObj||(this.log("请检查是否引入支付文件"),!1)},postMessageToParent:function(e){window.parent.postMessage(JSON.stringify(e),"*")},chooseSDWPay:function(e,n){if("12320"==e.channel)return void window.parent.postMessage(JSON.stringify({operate:"sdw_dialogMessage",postSdwData:!0,option:{fn:"show",type:"error",msg:"ios正在升级，将于10日内更换为苹果支付（iap），敬请期待",hidden:2}}),"*");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void console.log(e)}if(["12098","12129","11753","12238"].indexOf(e.channel)>-1&&!e.sdwPay)return window.sdw.addJsFile("https://www.shandw.com/libs/js/sdwpay.min.window.js?v="+(new Date).getTime(),function(){new window.sdwpay(e).showPay()}),!1;e.sdwPay&&delete e.sdwPay;var t=this;e=e||{};var o=this.checkOptionArguments(e,["subject","appId","gameName","accountId","amount","cpOrderId","sign","timestamp","channel"]);if(e.paychannel=e.paychannel||"",0===o.result)return void this.log(o.msg);if(this.payMap[e.cpOrderId])return void alert("订单号重复提交...");if(this.payMap[e.cpOrderId]=1,this.checkOptionCallback(e)){if(i.onJDJR)return void window.parent.postMessage(JSON.stringify({operate:"jdPay",postSdwData:!0,data:e}),"*");var a=function(n){sdw.postChoosePayInfo({transactionId:""+e.cpOrderId,paymentType:n||"alipay",currencyType:"CNY",currencyAmount:e.amount/100})},s=function(e,n){var t=r(e);t.config.method=n,t.config.weixin=!0,dhpayObj&&dhpayObj.payfor(t)},r=function(e){console.log(e);var n={postjson:{},config:{alipay:!0,weixin:!0},resultpost:!0};for(var t in e)if("success"!=t&&"fail"!=t&&"cancel"!=t&&"complete"!=t&&"paychannel"!=t&&e[t]&&(n.postjson[t]=e[t]),"complete"==t&&"function"==typeof e.complete){var o=sdw.createPayData(e);n.closecallback=function(){e.complete(o)}}return n.closecallback||(n.closecallback=function(){}),n};if(window.OPEN_DATA&&window.OPEN_DATA.appurl)var d=window.sdw.getUrlObj(window.OPEN_DATA.appurl.split("?")[1]),l=1;else var d=window.sdw.getUrlObj(),l=d.pltpay;var c=d.plt;"oppoxg"==window._plt_&&(c="oppoxg",l=!0);var w=function(){return"wanyiwanh5"==c}();if(!w&&c&&l&&void 0!==window._sdw_3th_pay_fun&&"null"!==c)return void window._sdw_3th_pay_fun(e);var p=function(){sdw.dialogMessage({fn:"show",msg:"Loading...",type:"loading",hidden:!1});jQuery&&jQuery.ajax({type:"GET",url:n?"http://sandbox.pay.17m3cdn.com/sdk/CodeWappay.aspx":"https://pay.17m3.com/sdk/CodeWappay.aspx",data:{subject:e.subject,appId:e.appId,gameName:e.gameName,accountId:e.accountId,amount:e.amount,cpOrderId:e.cpOrderId,call_back_url:e.call_back_url,merchant_url:e.merchant_url,sign:e.sign,timestamp:e.timestamp,channel:e.channel,payChannel:"sdw",payScene:5},dataType:"jsonp",jsonpCallback:"callback"+(new Date).getTime(),success:function(e){if("1"==e.result){a("applepay");var n=e.data,o=t.createSDKCallback(n);NativeBridge.call("ApplePayment",JSON.stringify(n),o,n),sdw.dialogMessage({fn:"hidden"})}else sdw.dialogMessage({fn:"show",msg:"sdwJs.js[chooseSDWPay]:"+JSON.stringify(e),type:"error",hidden:!1})}})};if("1"==d.app_review)return void(i.hasApplePay&&p());this.cachePayHandler=function(n){if(i.hasApplePay&&0===n)return p(),!1;if(t.hasSDK()){var o=t.createSDKCallback(e);return i.onIOS?i.hasIOSMicroWapPay?s(e,"wap"):NativeBridge.call("quickPayment",JSON.stringify(e),o,e):(i.hasH5NativePay?CDLAndroid.channelPayment&&CDLAndroid.channelPayment(JSON.stringify(e)):i.onMicroSDWAPP||CDLAndroid.sdkAvaliable&&CDLAndroid.sdkAvaliable()?s(e,"wap"):CDLAndroid.quickPayment&&CDLAndroid.quickPayment(JSON.stringify(e)),i.ky||(window.onDHSDKResult=o)),!1}var a=r(e);if(a.config.method="web",""!=e.paychannel){var d="weixin"==e.paychannel;a.config.alipay=!d,a.config.weixin=d}i.onKD&&i.onAndriod&&i.and_KdVer<402&&(a.config.alipay=!1),a.config.qpay=i.onQQ,w&&(a.config.qpay=!0,a.config.alipay=!1,a.config.weixin=!1),"10911"!=e.channel&&"11267"!=e.channel||(a.config.qpay=!1),dhpayObj&&dhpayObj.payfor(a)},sdw.wxGame?function(e){e=e||{};var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(e[t]));n=n.join("&"),setTimeout(function(){wx.miniProgram.navigateTo({url:"/pages/pay/pay?"+n,success:function(){console.log("success")},fail:function(){console.log("fail")},complete:function(){console.log("complete")}})},20)}(e):i.ky&&!w?/(?=.*btnName)(?=.*M32GW)^.*$/.test(location.href)?this.cachePayHandler&&this.cachePayHandler():this.postMessageToParent({postSdwData:!0,operate:"checkVisitorMode"}):this.cachePayHandler&&this.cachePayHandler()}},isFun:function(e){return"function"==typeof e},onSetShareOperate:function(e){var n=this.clone(e),t=this;"function"!=typeof n.success&&(n.success=function(){}),"function"!=typeof n.cancel&&(n.cancel=function(){}),"function"!=typeof n.fail&&(n.fail=function(){});var o=window.OPEN_DATA?window.sdw.getUrlObj(window.OPEN_DATA.appurl):window.sdw.getUrlObj(),a=o.plt,r={postSdwData:!0,operate:"setSDWShareInfo"};if(r.shareInfo=n,i.onWeiXin){var d=s._shareItems.slice(0);if(r.source="weixin",void 0===n.target||""==n.target)n.target=d;else{for(var l=n.target,c=[],w=0;w<l.length;w++)-1!=d.indexOf(l[w])&&c.push(l[w]);n.target=c}}else if(i.onShandw||i.onMDZZHelper||i.onMicroSDWAPP)var t=this;else if(i.onKD){var t=this,p=t.clone(n),u=t.createCallback(p);window.NativeBridge.call("onSetShareOperate",p,u)}if(i.ky){window.sdw.childSuccessCallback=n.success,window.sdw.childCancelCallback=n.cancel,window.sdw.childFailCallback=n.fail;var f=JSON.stringify(r);parent.postMessage(f,"*")}a&&"null"!=a&&(window._LOADED_JS?t.isFun(window._onSetShareOperate)&&window._onSetShareOperate(n):(window._onSetShareOperateCacheFn=function(){t.isFun(window._onSetShareOperate)&&window._onSetShareOperate(n)},t.th_callback.push(_onSetShareOperateCacheFn)),i.hasH5NativePay)},closeSDWPay:function(){this.hasSDK()||(i.ky&&i.onWeiXin?window.parent.postMessage(JSON.stringify({operate:"requestHideQrcode"}),"*"):dhpayObj&&dhpayObj.hidepay())},setLocalStorage:function(e,n){i.onIOS&&(i.onKD||i.onShandw||i.onMDZZHelper)&&i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"sdw_setLocalStorage",key:e,data:n}),"*"):localStorage["_SDW_"+e]=JSON.stringify({name:"sdw_data",data:n})},readLocalStorage:function(e,n){if(i.onIOS&&(i.onKD||i.onShandw||i.onMDZZHelper)&&i.ky)sdw._readLocalStorageCallback=n,window.parent.postMessage(JSON.stringify({postSdwData:!0,key:e,operate:"sdw_getLocalStorage"}),"*");else{var t=localStorage["_SDW_"+e];try{t=JSON.parse(t),n(t.data)}catch(e){n(null)}}},postServerId:function(e){console.log("此方法【postServerId】已失效")},postGameInfo:function(e){e=e||{};for(var n=["uid","appid","channel","sid","level","type","vip","power","new"],t=["id","sname","nick"],o=0;o<n.length;o++)if(void 0===e[n[o]])return void console.log("缺少必填参数字段",n[o]);for(var o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]="");var a=window.OPEN_DATA?window.sdw.getUrlObj(window.OPEN_DATA.appurl):window.sdw.getUrlObj(),s=a.plt,r=this;if(s&&"null"!==s)if(window._LOADED_JS)r.isFun(window._getGameUserInfo)&&window._getGameUserInfo(e);else{var d=function(){r.isFun(window._getGameUserInfo)&&window._getGameUserInfo(e)};r.th_callback.push(d)}i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,data:e,operate:"sdw_postGameInfo"}),"*")},clone:function(e){if("object"==typeof e){var n={};for(var t in e)n[t]=e[t]}return n},getAuthInfo:function(e,n){var t=e.platform,o=e.gid,a="";t&&o&&"null"!==t?(window.sdw._authCallback=n,window.sdw._authParam=window.sdw._authParam||{},window.sdw._authParam.cGid=o,window.sdw._authParam.plt=t,window.sdw._authParam.channel=e.channel,a="https://www.shandw.com/3th/"+t+"/auth.js? ="+ +new Date,window.sdw.addJsFile(a,function(){console.log("加载第三方的用户授权js文件...")})):alert("[sdw.getAuthInfo]:缺少platform和gid字段")},_getQCode:function(){return i.onWeiXin?{atSDW:sdw._atSdwInfo.atSDW,result:1}:{atSDW:1,result:1}},getSdwQcodeInfo:function(e,n){if(0===arguments.length)return void console.log("缺少参数");1===arguments.length&&(n=e);var t=window.sdw.getUrlObj(),o=t.plt,a=this;if(o&&"null"!==o)if(window._LOADED_JS)a.isFun(window._getSdwQcodeInfo)?window._getSdwQcodeInfo(n):n&&n({atSDW:2});else{var s=function(){a.isFun(window._getSdwQcodeInfo)?window._getSdwQcodeInfo(n):n&&n({atSDW:2})};a.th_callback.push(s)}else sdw._atSdwInfo?this.isFun(n)&&n(sdw._getQCode()):i.ky&&(sdw._getQcodeInfo_callback=n,window.parent.postMessage(JSON.stringify({postSdwData:!0,gid:e,operate:"getSdwQcodeInfo"}),"*"))},onShowQcode:function(e,n){1===arguments.length&&(n=e);var t=window.sdw.getUrlObj(),o=t.plt,a=this;if(o&&"null"!==o)if(window._LOADED_JS)a.isFun(window._onShowQcode)&&window._onShowQcode(n);else{var s=function(){a.isFun(window._onShowQcode)&&window._onShowQcode(n)};a.th_callback.push(s)}else i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,gid:e,operate:"onShowQcode"}),"*")},onFocus:function(e){var n=window.sdw.getUrlObj(),t=n.plt,o=this;if(t&&"null"!==t)if(window._LOADED_JS)o.isFun(window._onFocus)&&window._onFocus(e);else{var a=function(){o.isFun(window._onFocus)&&window._onFocus(e)};o.th_callback.push(a)}},getSdwVerify:function(e){var n=window.sdw.getUrlObj(),t=n.plt,o=this;if(t&&"null"!==t)if(window._LOADED_JS)o.isFun(window._getSdwVerify)?window._getSdwVerify(e):e({verify:2,wallow:0});else{var a=function(){o.isFun(window._getSdwVerify)?window._getSdwVerify(e):e({verify:2,wallow:0})};o.th_callback.push(a)}else e&&e({verify:2,wallow:0})},onShowSdwVerify:function(e){var n=window.sdw.getUrlObj(),t=n.plt,o=this;if(t&&"null"!==t)if(window._LOADED_JS)o.isFun(window._onShowSdwVerify)&&window._onShowSdwVerify(e);else{var a=function(){o.isFun(window._onShowSdwVerify)&&window._onShowSdwVerify(e)};o.th_callback.push(a)}else console.log("闪电玩目前还没有实名认证")},onShowShareLayer:function(){var e=window.sdw.getUrlObj(),n=e.plt,t=this;if(n&&"null"!==n)if(window._LOADED_JS)t.isFun(window._onShowShareLayer)&&window._onShowShareLayer();else{var o=function(){t.isFun(window._onShowShareLayer)&&window._onShowShareLayer()};t.th_callback.push(o)}},pltShare:function(e){var n=window.OPEN_DATA?window.sdw.getUrlObj(window.OPEN_DATA.appurl):window.sdw.getUrlObj(),t=n.plt,o=this;if(t&&"null"!==t)if(window._LOADED_JS)o.isFun(window._pltShare)&&window._pltShare(e);else{var a=function(){o.isFun(window._pltShare)&&window._pltShare(e)};o.th_callback.push(a)}},getAvatar:function(e){var n=window.OPEN_DATA?window.sdw.getUrlObj(window.OPEN_DATA.appurl):window.sdw.getUrlObj(),t=n.plt,o=this;if(t&&"null"!==t)if(window._LOADED_JS)o.isFun(window._getAvatar)&&window._getAvatar(e);else{var a=function(){o.isFun(window._getAvatar)&&window._getAvatar(e)};o.th_callback.push(a)}},getGameUserInfo:function(e,n){console.log("此方法【getGameUserInfo】已失效，请调用新的方法")},addDesktop:function(e){var n=this,t=window.OPEN_DATA?window.sdw.getUrlObj(window.OPEN_DATA.appurl):window.sdw.getUrlObj(),o=t.plt;if(o&&"null"!=o){e=e||{};var e={title:e.name,icon:e.icon,url:e.linkUrl,success:e.success};return void(window._LOADED_JS?n.isFun(window._addDesktop)&&window._addDesktop(e):(window._addDesktop_callback=function(){n.isFun(window._addDesktop)&&window._addDesktop(e)},window.th_callback.push(_addDesktop_callback)))}i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"sdw_addDesktop"}),"*"):console.log("只能在IFRAME模式下调用")},requestFullScreen:function(){i.onShandw&&i.onIOS||(i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"requestFullScreen"}),"*"):console.log("只能在IFRAME模式下调用"))},exitFullScreen:function(){i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"exitFullScreen"}),"*"):console.log("只能在IFRAME模式下调用")},openUrlToRoot:function(e){e=e||{},e.url=e.url||location.href,i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"openUrlToRoot",option:e}),"*"):location.href=e.url},postGameInfoToClient:function(e){i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"postGameInfoToClient",data:e}),"*")},postGamePlayerInfo:function(e){i.onMicroSDWAPP&&i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"postGamePlayerInfo",data:e}),"*")},postPaySuccessInfo:function(e){i.onMicroSDWAPP&&(e=e||{},e.paymentType="wxpay",i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"postPaySuccessInfo",data:e}),"*"))},postChoosePayInfo:function(e){i.onMicroSDWAPP&&(e=e||{},e.paymentType=e.paymentType||"wxpay",i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"postChoosePayInfo",data:e}),"*"))},postInfoH5Native:function(e){i.hasH5NativePay&&i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,data:e,operate:"postInfoH5Native"}),"*")},onShowToolBar:function(){i.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"onShowToolBar"}),"*")}},i.ky){var r={getGameToken_callback:function(e){var n=e.data,t=window.sdw._getGameToken_option;1===n.result?t.success&&t.success(n):t.fail&&t.fail(n.msg||"数据请求失败")},getFriendList_callback:function(e){var n=e.data;window.sdw._getFriendListCallback&&window.sdw._getFriendListCallback(n)},shareCallback_success:function(){window.sdw.childSuccessCallback&&window.sdw.childSuccessCallback()},shareCallback_cancel:function(){window.sdw.childFailCallback&&window.sdw.childCancelCallback()},shareCallback_fail:function(){window.sdw.childFailCallback&&window.sdw.childFailCallback()},choosePayCheckState_ok:function(e){var n=e.useweb;sdw.cachePayHandler&&sdw.cachePayHandler(n)},getLocalStorage_ok:function(e){var n=e.data;sdw._readLocalStorageCallback&&sdw._readLocalStorageCallback(n)},getSdwQcodeInfo_callback:function(e){sdw._atSdwInfo=e.data,sdw._getQcodeInfo_callback&&sdw._getQcodeInfo_callback(sdw._getQCode())},goBackstage_callback:function(){sdw._goBackstageCallback&&sdw._goBackstageCallback()},recoverBackstage_callback:function(){sdw._recoverBackstageCallback&&sdw._recoverBackstageCallback()},createNativeBridgeCallback_callback:function(e){var n=window.NativeBridge.callbacks[e.callbackId];n&&("ApplePayment"===e.fncName?n(e.res):n())},window_size_change:function(e){"function"==typeof sdw.onResize?sdw.onResize(e.width,e.height):console.log(e.width,e.height,"resize")}};window.addEventListener("message",function(e){if("string"==typeof e.data)try{var n=JSON.parse(e.data);if(n.postSdwData){var t=n.oprate||n.operate;r[t]&&r[t](n)}}catch(e){console.log(e)}},!1)}window.sdw._MD5=function(e){function n(e){var n=(e>>>0).toString(16);return"00000000".substr(0,8-n.length)+n}function t(e){for(var n=[],t=0;t<8;t++)n.push(255&e),e>>>=8;return n}function o(e,n){return e<<n&4294967295|e>>>32-n}function a(e,n,t){return e&n|~e&t}function i(e,n,t){return t&e|~t&n}function s(e,n,t){return e^n^t}function r(e,n,t){return n^(e|~t)}function d(e,n){return e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]}function l(e){for(var n=[],t=0;t<e.length;t++)if(e.charCodeAt(t)<=127)n.push(e.charCodeAt(t));else for(var o=encodeURIComponent(e.charAt(t)).substr(1).split("%"),a=0;a<o.length;a++)n.push(parseInt(o[a],16));return n}function c(e,t,o,a){for(var i="",s=0,r=0,d=3;d>=0;d--)r=arguments[d],s=255&r,r>>>=8,s<<=8,s|=255&r,r>>>=8,s<<=8,s|=255&r,r>>>=8,s<<=8,s|=r,i+=n(s);return i}function w(e){for(var n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t];return n}function p(e,n){return 4294967295&e+n}var u=null,f=null;return"string"==typeof e?u=l(e):e.constructor==Array?0===e.length?u=e:"string"==typeof e[0]?u=function(e){for(var n=[],t=0;t<e.length;t++)n=n.concat(l(e[t]));return n}(e):"number"==typeof e[0]?u=e:f=typeof e[0]:"undefined"!=typeof ArrayBuffer?e instanceof ArrayBuffer?u=w(new Uint8Array(e)):e instanceof Uint8Array||e instanceof Int8Array?u=w(e):e instanceof Uint32Array||e instanceof Int32Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Float32Array||e instanceof Float64Array?u=w(new Uint8Array(e.buffer)):f=typeof e:f=typeof e,f&&alert("MD5 type mismatch, cannot process "+f),function(){function e(e,n,t,a){var i=_;_=S,S=v,v=p(v,o(p(m,p(e,p(n,t))),a)),m=i}var n=u.length;u.push(128);var l=u.length%64;if(l>56){for(var w=0;w<64-l;w++)u.push(0);l=u.length%64}for(w=0;w<56-l;w++)u.push(0);u=u.concat(t(8*n));var f=1732584193,g=4023233417,h=2562383102,y=271733878,m=0,v=0,S=0,_=0;for(w=0;w<u.length/64;w++){m=f,v=g,S=h,_=y;var k=64*w;e(a(v,S,_),3614090360,d(u,k),7),e(a(v,S,_),3905402710,d(u,k+4),12),e(a(v,S,_),606105819,d(u,k+8),17),e(a(v,S,_),3250441966,d(u,k+12),22),e(a(v,S,_),4118548399,d(u,k+16),7),e(a(v,S,_),1200080426,d(u,k+20),12),e(a(v,S,_),2821735955,d(u,k+24),17),e(a(v,S,_),4249261313,d(u,k+28),22),e(a(v,S,_),1770035416,d(u,k+32),7),e(a(v,S,_),2336552879,d(u,k+36),12),e(a(v,S,_),4294925233,d(u,k+40),17),e(a(v,S,_),2304563134,d(u,k+44),22),e(a(v,S,_),1804603682,d(u,k+48),7),e(a(v,S,_),4254626195,d(u,k+52),12),e(a(v,S,_),2792965006,d(u,k+56),17),e(a(v,S,_),1236535329,d(u,k+60),22),e(i(v,S,_),4129170786,d(u,k+4),5),e(i(v,S,_),3225465664,d(u,k+24),9),e(i(v,S,_),643717713,d(u,k+44),14),e(i(v,S,_),3921069994,d(u,k),20),e(i(v,S,_),3593408605,d(u,k+20),5),e(i(v,S,_),38016083,d(u,k+40),9),e(i(v,S,_),3634488961,d(u,k+60),14),e(i(v,S,_),3889429448,d(u,k+16),20),e(i(v,S,_),568446438,d(u,k+36),5),e(i(v,S,_),3275163606,d(u,k+56),9),e(i(v,S,_),4107603335,d(u,k+12),14),e(i(v,S,_),1163531501,d(u,k+32),20),e(i(v,S,_),2850285829,d(u,k+52),5),e(i(v,S,_),4243563512,d(u,k+8),9),e(i(v,S,_),1735328473,d(u,k+28),14),e(i(v,S,_),2368359562,d(u,k+48),20),e(s(v,S,_),4294588738,d(u,k+20),4),e(s(v,S,_),2272392833,d(u,k+32),11),e(s(v,S,_),1839030562,d(u,k+44),16),e(s(v,S,_),4259657740,d(u,k+56),23),e(s(v,S,_),2763975236,d(u,k+4),4),e(s(v,S,_),1272893353,d(u,k+16),11),e(s(v,S,_),4139469664,d(u,k+28),16),e(s(v,S,_),3200236656,d(u,k+40),23),e(s(v,S,_),681279174,d(u,k+52),4),e(s(v,S,_),3936430074,d(u,k),11),e(s(v,S,_),3572445317,d(u,k+12),16),e(s(v,S,_),76029189,d(u,k+24),23),e(s(v,S,_),3654602809,d(u,k+36),4),e(s(v,S,_),3873151461,d(u,k+48),11),e(s(v,S,_),530742520,d(u,k+60),16),e(s(v,S,_),3299628645,d(u,k+8),23),e(r(v,S,_),4096336452,d(u,k),6),e(r(v,S,_),1126891415,d(u,k+28),10),e(r(v,S,_),2878612391,d(u,k+56),15),e(r(v,S,_),4237533241,d(u,k+20),21),e(r(v,S,_),1700485571,d(u,k+48),6),e(r(v,S,_),2399980690,d(u,k+12),10),e(r(v,S,_),4293915773,d(u,k+40),15),e(r(v,S,_),2240044497,d(u,k+4),21),e(r(v,S,_),1873313359,d(u,k+32),6),e(r(v,S,_),4264355552,d(u,k+60),10),e(r(v,S,_),2734768916,d(u,k+24),15),e(r(v,S,_),1309151649,d(u,k+52),21),e(r(v,S,_),4149444226,d(u,k+16),6),e(r(v,S,_),3174756917,d(u,k+44),10),e(r(v,S,_),718787259,d(u,k+8),15),e(r(v,S,_),3951481745,d(u,k+36),21),f=p(f,m),g=p(g,v),h=p(h,S),y=p(y,_)}return c(y,h,g,f).toUpperCase()}()},window.sdw.getAjaxData=function(e,n){if(!e)return void console.log("[getAjaxData]: url error");var t=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var n=["MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<n.length;t++)try{if(e=new ActiveXObject(n[t]))break}catch(e){}return e}();t&&(t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=JSON.parse(t.responseText);n&&n(e)}else console.log("[AJAX ERROR]:",t)},t.send(null))},window.sdw.postAjaxData=function(e,n,t,o){var a=this.createXMLHTTPRequest();a.open("post",e),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o&&o.contentType&&a.setRequestHeader("Content-type",o.contentType),a.send(n),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status)try{var e=JSON.parse(a.responseText);t&&t(e)}catch(e){}}},window.sdw.createXMLHTTPRequest=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var n=["MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<n.length;t++)try{if(e=new ActiveXObject(n[t]))break}catch(e){}return e},window.sdw.getUrlObj=function(e){for(var n=e||location.search,t=n.length>0?n.substring(1):"",o={},a=t.length?t.split("&"):[],i=null,s=null,r=null,d=0;d<a.length;d++)i=a[d].split("="),s=decodeURIComponent(i[0]),r=decodeURIComponent(i[1]),s.length&&(o[s]=r);return o},window.sdw.params=window.sdw.getUrlObj(),window.sdw.addJsFile=function(e,n){var t=document.getElementsByTagName("HEAD").item(0),o=document.createElement("script");o.type="text/javascript",o.src=e,t.appendChild(o),o.onload=function(){"function"==typeof n&&n()}},window.sdw.onResize=function(e,n){console.log("resize...此处CP可重新定义此函数...")},window.sdw.dialogMessage=function(e){i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,option:e,operate:"sdw_dialogMessage"}),"*"):console.log("只能在IFRAME模式下调用")},window.sdw.setGameToolPositionY=function(e){if(e<0||e>1)return void console.log("y的范围错误");i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,y:e,operate:"sdw_setGameToolPositionY"}),"*"):console.log("只能在IFRAME模式下调用")},window.sdw.openSafari=function(e){e.isSet=!1,window.NativeBridge.call("createDesktop",e,null,e,"kd")},window.sdw.dialogMessage=function(e){i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,option:e,operate:"sdw_dialogMessage"}),"*"):console.log("只能在IFRAME模式下调用")},window.sdw.setGameToolPositionY=function(e){if(e<0||e>1)return void console.log("y的范围错误");i.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,y:e,operate:"sdw_setGameToolPositionY"}),"*"):console.log("只能在IFRAME模式下调用")},window.sdw.openSafari=function(e){e.isSet=!1,window.NativeBridge.call("createDesktop",e,null,e,"kd")},window.sdw.canSetShare=o.onKD||o.onShandw||o.onWeiXin,window.sdw.canAddDesktop=o.onKD||o.onShandw||window.OPEN_DATA,function(){if(window.OPEN_DATA&&window.OPEN_DATA.appurl){var e=window.sdw.getUrlObj(window.OPEN_DATA.appurl.split("?")[1]);sdw.params=e;var n=!0}else var e=window.sdw.getUrlObj(),n=e.pltpay;o.hasH5NativePay&&(n=!1),e.wxGame&&window.sdw.addJsFile("https://res.wx.qq.com/open/js/jweixin-1.3.2.js",function(){sdw.wxGame=1}),!o.ky&&o.onQQ&&window.sdw.addJsFile("https://open.mobile.qq.com/sdk/qqapi.js?_bid=152");var t=e.plt;"oppoxg"==window._plt_&&(t="oppoxg",n=!0);var a=e.isTest167;if(t&&n&&"null"!==t){var i=a?"http://119.90.39.167/3th/":"https://www.shandw.com/3th/";console.log(i);var s=i+t+"/pay.js?m="+ +new Date;window.sdw.addJsFile(s,function(){window._LOADED_JS=!0;for(var e=0;e<window.sdw.th_callback.length;e++)window.sdw.th_callback[e]()})}}(),window.sdw.logout=function(){i.ky&&window.sdw.postMessageToParent({postSdwData:!0,operate:"sdw_logout"})},window.sdw.goBackstage=function(e){window.sdw._goBackstageCallback=e,i.ky&&window.sdw.postMessageToParent({postSdwData:!0,operate:"sdw_goBackstage"})},window.sdw.recoverBackstage=function(e){window.sdw._recoverBackstageCallback=e,i.ky&&window.sdw.postMessageToParent({postSdwData:!0,operate:"sdw_recoverBackstage"})},window.sdw.getGameToken=function(e){window.sdw._getGameToken_option=e,i.ky&&window.sdw.postMessageToParent({postSdwData:!0,data:e,operate:"sdw_getGameToken"})};window.sdw.getFriendList=function(e){if(!e||!e.callback)return"缺少回调函数";for(var n={friendList:["5281991900"]},t=e.page||0,o=e.pageSize||20,a=n.friendList.slice(t*o,t*o+o),i="",s=0;s<a.length;s++)i+=a[s]+",";var r="https://platform.shandw.com/openidToSDWUid?channel="+window.sdw.getUrlObj().channel+"&openids="+i;sdw.getAjaxData(r,function(n){1==n.result&&e.callback(n.data)})};var d=t(1);window.sdw.dialogManage=d;var l=t(0);window.sdw.adManage=l}]);